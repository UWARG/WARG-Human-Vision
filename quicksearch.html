<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"connections_DataRelay.js.html":{"id":"connections_DataRelay.js.html","title":"Source: connections/DataRelay.js","body":" WARG Groundstation Modules connections/DataRelaycore/Menucore/MenuBuildercore/WindowManagercore/WindowShortcutsmanagers/NetworkManagermodels/Connectionmodels/PacketTypesmodels/TelemetryDatautil/PacketParserutil/PersistentSettingsutil/Templateutil/Validatorviews/AppSettingsViewviews/ConsoleViewviews/NetworkSettingsViewviews/ParentSettingsView Classes models/Connection~Connectionutil/PersistentSettings~PersistentSettings Events models/Connection~Connection:closemodels/Connection~Connection:connectmodels/Connection~Connection:datamodels/Connection~Connection:socket_errormodels/Connection~Connection:timeoutmodels/Connection~Connection:writemodels/TelemetryData~TelemetryData:aircraft_channelsmodels/TelemetryData~TelemetryData:aircraft_gainsmodels/TelemetryData~TelemetryData:aircraft_orientationmodels/TelemetryData~TelemetryData:aircraft_positionmodels/TelemetryData~TelemetryData:aircraft_status Source: connections/DataRelay.js /** * @author Serge Babayan * @module connections/DataRelay * @requires config/network-config * @requires managers/NetworkManager * @requires util/Logger * @requires util/PacketParser * @requires StatusManager * @requires models/TelemetryData * @emits models/TelemetryData~TelemetryData:aircraft_position * @emits models/TelemetryData~TelemetryData:aircraft_orientation * @emits models/TelemetryData~TelemetryData:aircraft_gains * @emits models/TelemetryData~TelemetryData:aircraft_status * @emits models/TelemetryData~TelemetryData:aircraft_channels * @copyright Waterloo Aerial Robotics Group 2016 * @licence https://raw.githubusercontent.com/UWARG/WARG-Ground-Station/master/LICENSE * @description Configures the data relay connection for connecting to it, and parsing its data and sending out events * to the TelemetryData module * @see http://docs.uwarg.com/picpilot/datalink/ */ var network_config = require('../../config/network-config'); var NetworkManager = require('../managers/NetworkManager'); var Logger = require('../util/Logger'); var TelemetryData = require('../models/TelemetryData'); var StatusManager = require('../StatusManager'); var PacketParser = require('../util/PacketParser'); var _ = require('underscore'); var DataRelay = {}; var parseHeaders = function (data) { TelemetryData.setHeadersFromString(data); PacketParser.checkForMissingHeaders(TelemetryData.getHeaders()); Logger.debug('Network data_relay Received headers: ' + data); Logger.data(JSON.stringify(TelemetryData.getHeaders()), 'DATA_RELAY_HEADERS'); StatusManager.addStatus('Received headers from data_relay', 3, 3000); }; var parseData = function (data) { TelemetryData.setCurrentStateFromString(data); TelemetryData.emitPackets(); Logger.data(JSON.stringify(TelemetryData.getCurrentState()), 'DATA_RELAY_DATA'); StatusManager.setStatusCode('TIMEOUT_DATA_RELAY', false); }; /** * Initializes or re-initializes the data relay connection and sets up callbacks for parsing any received data * @function init */ DataRelay.init = function () { if(NetworkManager.getConnectionByName('data_relay')){ NetworkManager.removeAllConnections('data_relay'); } var data_relay = NetworkManager.addConnection('data_relay', network_config.get('datarelay_host'), network_config.get('datarelay_port')); data_relay.setTimeout(network_config.get('datarelay_timeout')); data_relay.on('connect', function () { TelemetryData.clearHeaders(); StatusManager.setStatusCode('CONNECTED_DATA_RELAY', true); }); data_relay.on('close', function (had_error) { StatusManager.setStatusCode('DISCONNECTED_DATA_RELAY', true); }); data_relay.on('timeout', function () { StatusManager.setStatusCode('TIMEOUT_DATA_RELAY', true); }); data_relay.on('write', function (data) { StatusManager.addStatus('Sent command to data_relay', 3, 2000); }); data_relay.on('data', function (data) { if (!data) { //don't do anything if we get blank data or anything that's not an object Logger.error('Got a blank packet from the data relay station. Value: ' + data); return; } data = data.toString(); // First transmission is header columns if (TelemetryData.getHeaders().length === 0) { parseHeaders(data); } else { //if its the non-header columns(actual data) parseData(data); } }.bind(this)); }; module.exports = DataRelay; × Search results Close "},"core_Menu.js.html":{"id":"core_Menu.js.html","title":"Source: core/Menu.js","body":" WARG Groundstation Modules connections/DataRelaycore/Menucore/MenuBuildercore/WindowManagercore/WindowShortcutsmanagers/NetworkManagermodels/Connectionmodels/PacketTypesmodels/TelemetryDatautil/PacketParserutil/PersistentSettingsutil/Templateutil/Validatorviews/AppSettingsViewviews/ConsoleViewviews/NetworkSettingsViewviews/ParentSettingsView Classes models/Connection~Connectionutil/PersistentSettings~PersistentSettings Events models/Connection~Connection:closemodels/Connection~Connection:connectmodels/Connection~Connection:datamodels/Connection~Connection:socket_errormodels/Connection~Connection:timeoutmodels/Connection~Connection:writemodels/TelemetryData~TelemetryData:aircraft_channelsmodels/TelemetryData~TelemetryData:aircraft_gainsmodels/TelemetryData~TelemetryData:aircraft_orientationmodels/TelemetryData~TelemetryData:aircraft_positionmodels/TelemetryData~TelemetryData:aircraft_status Source: core/Menu.js /** * @author Serge Babayan * @module core/Menu * @requires electron * @requires util/GainsImporter * @requires util/PathImporter * @copyright Waterloo Aerial Robotics Group 2016 * @licence https://raw.githubusercontent.com/UWARG/WARG-Ground-Station/master/LICENSE * @description Application menu configuration. Custom menu items are added here. * The top level object is the menu item name. * The second level is the sub-menu name. * Add a `callback` attribute with a function if you want to call a function * after a user clicks on the item. * Add a 'openWindow' attribute with the name of your window if you want to * open a specific window. * If both `callback` and `openWindow` are provided, the callback will be * executed and then the window will be opened. * Note: The `View` and `Help` menu items are generated in the MenuBuilder * * @example &lt;caption&gt;Example of a menu item that calls a function before opening * 'project_root/windows/myNewWindow.html'&lt;/caption&gt; * * var Menu = { * 'Windows': { //this is the menu label * 'Open Your New Window': { //this is the submenu label * callback: function () { * //optional function to be called before opening window * }, * openWindow: 'myNewWindow', //name of the window to open (optional) * height: 800, //height and width of the window. Default is 500 by 500 * width: 600, * devTools: true, //whether to open chrome devtools with the window (false by default) * type: 'separator' //whether this sub menu item is a separator * } * } * }; */ const electron = require('electron'); var Menu = { 'File': { 'Import Settings': {}, 'seperator1': { type: 'separator' //this is a separator }, 'Save Settings as...': {}, 'Quit': { callback: electron.app.quit } }, 'Windows': { 'Console': { openWindow: 'console', width: 900, height: 500, shortcut: 'CmdOrCtrl+Shift+C', devTools: true } }, 'Settings': { 'Network Settings': { openWindow: 'networkSettings', width: 600, height: 500, devTools: false, shortcut: 'CmdOrCtrl+Shift+N' }, 'App Settings': { openWindow: 'appSettings', width: 600, height: 700, shortcut: 'CmdOrCtrl+Shift+S', devTools: false } } }; module.exports = Menu; × Search results Close "},"core_MenuBuilder.js.html":{"id":"core_MenuBuilder.js.html","title":"Source: core/MenuBuilder.js","body":" WARG Groundstation Modules connections/DataRelaycore/Menucore/MenuBuildercore/WindowManagercore/WindowShortcutsmanagers/NetworkManagermodels/Connectionmodels/PacketTypesmodels/TelemetryDatautil/PacketParserutil/PersistentSettingsutil/Templateutil/Validatorviews/AppSettingsViewviews/ConsoleViewviews/NetworkSettingsViewviews/ParentSettingsView Classes models/Connection~Connectionutil/PersistentSettings~PersistentSettings Events models/Connection~Connection:closemodels/Connection~Connection:connectmodels/Connection~Connection:datamodels/Connection~Connection:socket_errormodels/Connection~Connection:timeoutmodels/Connection~Connection:writemodels/TelemetryData~TelemetryData:aircraft_channelsmodels/TelemetryData~TelemetryData:aircraft_gainsmodels/TelemetryData~TelemetryData:aircraft_orientationmodels/TelemetryData~TelemetryData:aircraft_positionmodels/TelemetryData~TelemetryData:aircraft_status Source: core/MenuBuilder.js /** * @author Serge Babayan * @module core/MenuBuilder * @requires core/Menu * @requires core/WindowManager * @requires electron * @copyright Waterloo Aerial Robotics Group 2016 * @licence https://raw.githubusercontent.com/UWARG/WARG-Ground-Station/master/LICENSE * @description Builds an electron based menu template from the core/Menu file * and returns an electron menu that can be attached to a BrowserWindow */ const electron = require('electron'); const ElectronMenu = electron.Menu; var Menu = require('./Menu'); var WindowManager = require('./WindowManager'); /** * @function build * @returns {electron.Menu} menu */ module.exports.build = function () { var menu_template = []; for (var menu_label in Menu) { var submenu = []; if (Menu.hasOwnProperty(menu_label)) { for (var sub_menu_label in Menu[menu_label]) { if (Menu[menu_label].hasOwnProperty(sub_menu_label)) { if (Menu[menu_label][sub_menu_label].type === 'separator') { submenu.push({ type: 'separator' }); continue; } submenu.push({ label: sub_menu_label, accelerator: Menu[menu_label][sub_menu_label].shortcut || null, click: function (menu_label, sub_menu_label) { if (Menu[menu_label][sub_menu_label].callback) { Menu[menu_label][sub_menu_label].callback(); } if (Menu[menu_label][sub_menu_label].openWindow) { WindowManager.openWindow(Menu[menu_label][sub_menu_label].openWindow, { devTools: Menu[menu_label][sub_menu_label].devTools, height: Menu[menu_label][sub_menu_label].height || 500, width: Menu[menu_label][sub_menu_label].width || 500 }); } }.bind(this, menu_label, sub_menu_label) }) } } menu_template.push({ label: menu_label, submenu: submenu }); } } menu_template.push( { label: 'View', submenu: [ { label: 'Reload', accelerator: 'CmdOrCtrl+R', click: function (item, focusedWindow) { if (focusedWindow) focusedWindow.reload(); } }, { label: 'Toggle Full Screen', accelerator: (function () { if (process.platform == 'darwin') return 'Ctrl+Command+F'; else return 'F11'; })(), click: function (item, focusedWindow) { if (focusedWindow) focusedWindow.setFullScreen(!focusedWindow.isFullScreen()); } }, { label: 'Toggle Developer Tools', accelerator: (function () { if (process.platform == 'darwin') return 'Alt+Command+I'; else return 'Ctrl+Shift+J'; })(), click: function (item, focusedWindow) { if (focusedWindow) focusedWindow.webContents.toggleDevTools(); } } ] }); menu_template.push({ label: 'Help', role: 'help', submenu: [ { label: 'Electron Docs', click: function () { require('electron').shell.openExternal('http://electron.atom.io') } } ] }); return ElectronMenu.buildFromTemplate(menu_template); }; × Search results Close "},"core_WindowManager.js.html":{"id":"core_WindowManager.js.html","title":"Source: core/WindowManager.js","body":" WARG Groundstation Modules connections/DataRelaycore/Menucore/MenuBuildercore/WindowManagercore/WindowShortcutsmanagers/NetworkManagermodels/Connectionmodels/PacketTypesmodels/TelemetryDatautil/PacketParserutil/PersistentSettingsutil/Templateutil/Validatorviews/AppSettingsViewviews/ConsoleViewviews/NetworkSettingsViewviews/ParentSettingsView Classes models/Connection~Connectionutil/PersistentSettings~PersistentSettings Events models/Connection~Connection:closemodels/Connection~Connection:connectmodels/Connection~Connection:datamodels/Connection~Connection:socket_errormodels/Connection~Connection:timeoutmodels/Connection~Connection:writemodels/TelemetryData~TelemetryData:aircraft_channelsmodels/TelemetryData~TelemetryData:aircraft_gainsmodels/TelemetryData~TelemetryData:aircraft_orientationmodels/TelemetryData~TelemetryData:aircraft_positionmodels/TelemetryData~TelemetryData:aircraft_status Source: core/WindowManager.js /** * @author Serge Babayan * @module core/WindowManager * @requires electron * @requires util/Logger * @requires root-path * @copyright Waterloo Aerial Robotics Group 2016 * @licence https://raw.githubusercontent.com/UWARG/WARG-Ground-Station/master/LICENSE * @description Manages the creation and destruction of windows for the application */ var Logger = require('../util/Logger'); const electron = require('electron'); const BrowserWindow = electron.BrowserWindow; var app_root = require('root-path'); var WindowsManager = { /** * @var open_windows {ObjectHash} Stores all the currently open windows * @private */ open_windows: {}, /** * @function openWindow * @description Opens a window by either creating it or focusing on an existing one * @param window_file_name {string} The window template file name * @param options {Object} Parameters specific to electron.BrowserWindow */ openWindow: function (window_file_name, options) { options = options || {}; //if the window is already open, focus on it if (this.open_windows[window_file_name]) { this.open_windows[window_file_name].focus(); } //otherwise create the window else { var new_window = new BrowserWindow(options); new_window.name = window_file_name; new_window.loadURL('file://' + app_root(`templates/windows/${window_file_name}.html`)); new_window.setMenu(null); //we don't want new windows to have their own menu if (options.devTools) { new_window.webContents.openDevTools(); } new_window.on('close', function () { Logger.debug(`Closing ${new_window.name} window`); //workaround since the windows don't close correction on win OS this.open_windows[new_window.name].hide(); this.open_windows[new_window.name] = null; delete this.open_windows[new_window.name]; }.bind(this)); this.open_windows[new_window.name] = new_window; Logger.debug(`Opening ${new_window.name} window`); } }, /** * @function getWindowNameFromId * @description Retrieves the hash key or window name for a window based on its BrowserWindow id * @param id {int} The id of the window * @returns name {string|null} The name of the window, or null if one wasn't found */ getWindowNameFromId: function (id) { for (var window in this.open_windows) { if (this.open_windows.hasOwnProperty(window)) { if (this.open_windows[window].id === id) { return window; } } } return null; }, /** * @function getFocusedWindowName * @description Returns the unique name for the currently focused window * @returns name {string|null} The name of the window, or null if one wasn't found */ getFocusedWindowName: function () { return this.getWindowNameFromId(electron.BrowserWindow.getFocusedWindow().id); } }; module.exports = WindowsManager; × Search results Close "},"core_WindowShortcuts.js.html":{"id":"core_WindowShortcuts.js.html","title":"Source: core/WindowShortcuts.js","body":" WARG Groundstation Modules connections/DataRelaycore/Menucore/MenuBuildercore/WindowManagercore/WindowShortcutsmanagers/NetworkManagermodels/Connectionmodels/PacketTypesmodels/TelemetryDatautil/PacketParserutil/PersistentSettingsutil/Templateutil/Validatorviews/AppSettingsViewviews/ConsoleViewviews/NetworkSettingsViewviews/ParentSettingsView Classes models/Connection~Connectionutil/PersistentSettings~PersistentSettings Events models/Connection~Connection:closemodels/Connection~Connection:connectmodels/Connection~Connection:datamodels/Connection~Connection:socket_errormodels/Connection~Connection:timeoutmodels/Connection~Connection:writemodels/TelemetryData~TelemetryData:aircraft_channelsmodels/TelemetryData~TelemetryData:aircraft_gainsmodels/TelemetryData~TelemetryData:aircraft_orientationmodels/TelemetryData~TelemetryData:aircraft_positionmodels/TelemetryData~TelemetryData:aircraft_status Source: core/WindowShortcuts.js /** * @author Serge Babayan * @module core/WindowShortcuts * @requires util/Logger * @requires electron * @copyright Waterloo Aerial Robotics Group 2016 * @licence https://raw.githubusercontent.com/UWARG/WARG-Ground-Station/master/LICENSE * @description Creates common shortcuts for a window. Requires `Mousetrap.js` to be declared within the window. * Current shortcuts include the ability to close and refresh windows, as well as open dev tools. * @example &lt;caption&gt;Usage example&lt;/caption&gt; * var WindowShortcuts = require('../../app/core/WindowShortcuts'); * WindowShortcuts.init(Mousetrap); //we pass in mousetrap in here */ var electron = require('electron'); var remote = electron.remote; var Logger = remote.require('./app/util/Logger'); var WindowManager = remote.require('./app/core/WindowManager'); /** * function init * @param Mousetrap {Object} Reference to the window's Mousetrap object */ module.exports.init = function (Mousetrap) { //opens up devtools for the specified window Mousetrap.bind('mod+shift+j', function (e) { remote.getCurrentWebContents().toggleDevTools(); }); //refreshes the window Mousetrap.bind('mod+shift+r', function (e) { Logger.debug('Refreshing ' + WindowManager.getFocusedWindowName() + ' window'); remote.getCurrentWindow().reload(); }); //closes the window Mousetrap.bind('mod+shift+q', function (e) { remote.getCurrentWindow().close(); }); }; × Search results Close "},"managers_NetworkManager.js.html":{"id":"managers_NetworkManager.js.html","title":"Source: managers/NetworkManager.js","body":" WARG Groundstation Modules connections/DataRelaycore/Menucore/MenuBuildercore/WindowManagercore/WindowShortcutsmanagers/NetworkManagermodels/Connectionmodels/PacketTypesmodels/TelemetryDatautil/PacketParserutil/PersistentSettingsutil/Templateutil/Validatorviews/AppSettingsViewviews/ConsoleViewviews/NetworkSettingsViewviews/ParentSettingsView Classes models/Connection~Connectionutil/PersistentSettings~PersistentSettings Events models/Connection~Connection:closemodels/Connection~Connection:connectmodels/Connection~Connection:datamodels/Connection~Connection:socket_errormodels/Connection~Connection:timeoutmodels/Connection~Connection:writemodels/TelemetryData~TelemetryData:aircraft_channelsmodels/TelemetryData~TelemetryData:aircraft_gainsmodels/TelemetryData~TelemetryData:aircraft_orientationmodels/TelemetryData~TelemetryData:aircraft_positionmodels/TelemetryData~TelemetryData:aircraft_status Source: managers/NetworkManager.js /** * @author Serge Babayan * @module managers/NetworkManager * @requires models/Connection * @copyright Waterloo Aerial Robotics Group 2016 * @licence https://raw.githubusercontent.com/UWARG/WARG-Ground-Station/master/LICENSE * @description Stores and manages all network connections for the app. Stores a connection by its name, and only allows * for having a single instance of a certain type of connection. * @see https://nodejs.org/api/net.html */ var Connection = require('../models/Connection'); var _ = require('underscore'); var NetworkManager = new function(){ /** * A hash of connections, where the key is the connection name, and value is the actual Connection object. * @type {Object} * @private */ var connections = {}; /** * Adds a connection to the NetworkManager, and attempts to connect it. * Note that this does not check if an existing connection of the same name exists. Will just overwrite the connection in that case. * @function addConnection * @param {String} name Unique connection name * @param {String} host Host(ie. 192.168.1.101) * @param {String} port The port to connect to * @returns {Connection} The newly created connection * @example &lt;caption&gt;Say we want to connect data relay to 192.168.1.101:1234&lt;/caption&gt; * //This will create a new connection for the data relay and attempt to connect to it * NetworkManager.addConnection('data_relay', '192.168.1.101', '1234'); */ this.addConnection = function(name, host, port){ var new_connection = new Connection({ name: name, host: host, port: port }); connections[name] = new_connection; new_connection.connect(); return new_connection; }; /** * Disconnects and removes a connection and all its event listeners from Network manager. * Does nothing if the connection does not exist * @function removeConnection * @param {String} name Unique connection name */ this.removeConnection = function(name){ if(connections[name]){ connections[name].destroy(); delete connections[name]; } }; /** * Disconnects and removes all connections, including their event listeners from the app. * Use with caution. * @function removeAllConnections */ this.removeAllConnections = function(){ _.each(connections, function(connection, connection_name){ connection.destroy(); delete connections[connection_name]; }); }; /** * Returns the stored connection as specified by the its name. Returns null if the connection doesn't exist * @function getConnectionByName * @param {String} name The unique name for the connection * @returns {Connection} */ this.getConnectionByName = function(name){ if(connections[name]){ return connections[name]; } return null; }; /** * Disconnects any network connections * @function disconnectAllConnections */ this.disconnectAllConnections = function(){ _.each(connections, function(connection, connection_name){ connection.disconnect(); }); }; }; module.exports = NetworkManager; × Search results Close "},"models_Connection.js.html":{"id":"models_Connection.js.html","title":"Source: models/Connection.js","body":" WARG Groundstation Modules connections/DataRelaycore/Menucore/MenuBuildercore/WindowManagercore/WindowShortcutsmanagers/NetworkManagermodels/Connectionmodels/PacketTypesmodels/TelemetryDatautil/PacketParserutil/PersistentSettingsutil/Templateutil/Validatorviews/AppSettingsViewviews/ConsoleViewviews/NetworkSettingsViewviews/ParentSettingsView Classes models/Connection~Connectionutil/PersistentSettings~PersistentSettings Events models/Connection~Connection:closemodels/Connection~Connection:connectmodels/Connection~Connection:datamodels/Connection~Connection:socket_errormodels/Connection~Connection:timeoutmodels/Connection~Connection:writemodels/TelemetryData~TelemetryData:aircraft_channelsmodels/TelemetryData~TelemetryData:aircraft_gainsmodels/TelemetryData~TelemetryData:aircraft_orientationmodels/TelemetryData~TelemetryData:aircraft_positionmodels/TelemetryData~TelemetryData:aircraft_status Source: models/Connection.js /** * @author Serge Babayan * @module models/Connection * @requires util/Logger * @requires net * @requires util * @requires events * @requires config/advanced-config * @copyright Waterloo Aerial Robotics Group 2016 * @licence https://raw.githubusercontent.com/UWARG/WARG-Ground-Station/master/LICENSE * @description Represents a TCP connection. This is used as a wrapper for the connection to the * data relay * @extends EventEmitter * @see https://nodejs.org/api/net.html */ var net = require('net'); var util = require('util'); var EventEmitter = require('events'); var Logger = require('../util/Logger'); var advanced_config = require('../../config/advanced-config'); /** * @param options Required options to initialize the TCP connection * @param options.name The unique name of the connection * @param options.host The hostname (ie. 192.168.1.101) * @param options.port The port for the connection (ie. 3000) * @throws {Error} If one of the parameters weren't provided * @constructor */ var Connection = function (options) { if (options &amp;&amp; options.name &amp;&amp; options.host &amp;&amp; options.port) { this.name = options.name; this.host = options.host; this.port = options.port; } else { throw new Error(&quot;Connection name,host, and port parameters are all required!&quot;) } /** * Timeout for the socket in milliseconds. Defaults to 5 seconds * @type {int} * @private */ var timeout = 5000; /** * Whether the connection is closed * @type {boolean} * @private */ var closed = true; /** * A reference to the socket. * @type {net.Socket|EventEmitter} * @private */ var socket = new net.Socket(); socket.setTimeout(timeout); // Initialize necessary properties from `EventEmitter` in this instance EventEmitter.call(this); this.setMaxListeners(advanced_config.get('connection_max_listeners')); /** * Attempts to connect to the TCP socket */ this.connect = function () { Logger.info('Attempting to connect to ' + this.name + ' at ' + this.host + ':' + this.port); socket.connect({ port: this.port, host: this.host }); }; /** * Disconnects from the TCP socket */ this.disconnect = function () { Logger.info('Disconnecting from ' + this.name + ' at ' + this.host + ':' + this.port); socket.end(); }; /** * Reconnects to the socket (same as doing a disconnect and then a connect) */ this.reconnect = function () { this.disconnect(); this.connect(); }; /** * Disconnects the connection and removes all event listeners * @function destroy */ this.destroy = function () { this.disconnect(); this.removeAllListeners(); socket.removeAllListeners(); }; /** * Whether the connection has been closed * @function isClosed * @returns {boolean} */ this.isClosed = function(){ return closed; }; /** * Gets the timeout for the socket connection in milliseconds * @function getTimeout * @returns {int} timeout */ this.getTimeout = function () { return timeout; }; /** * Sets the timeout for the socket connection in milliseconds * @function setTimeout * @param {int} new_timeout */ this.setTimeout = function (new_timeout) { timeout = new_timeout; socket.setTimeout(new_timeout); }; /** * Attempts to send data through the socket * @param data {Object} The data to send * @fires Connection:write */ this.write = function (data) { if (!data) { Logger.error('No data written to the ' + this.name + ' connection as a blank data packet was received'); return; } socket.write(data, 'utf8', function (error) { if (!error) { /** * Emitted if data was successfully sent through the socket. Passes back the data sent * @event Connection:write * @type {Object} */ this.emit('write', data); Logger.info(&quot;Network &quot; + this.name + &quot; Sent: &quot; + data); } else { Logger.error('An error occurred writing to the ' + this.name + ' connection. Attempted write: ' + data); } }.bind(this)); }; socket.on('connect', function () { /** * Emitted when the socket has successfully connected * @event Connection:connect * @type {null} */ this.emit('connect'); Logger.info('Sucessfully connected to ' + this.name + ' with host ' + this.host + ' and port ' + this.port); closed = false; }.bind(this)); socket.on('error', function (error) { Logger.error('Problem with ' + this.name + ' connection (host: ' + this.host + ',port:' + this.port + ')\\n' + error.toString()); /** * Emitted when an error has occurred on the socket. Does not throw an error if there are no listeners * @event Connection:socket_error * @type {Object} */ this.emit('socket_error', error); //NOTE: named socket_error and not error so as to not throw an exception }.bind(this)); /** * Emitted when the socket has timed out (receiving no data but still connected) * @event Connection:timeout * @type {null} */ socket.on('timeout', function () { this.emit('timeout', timeout); Logger.error('Timed out for ' + timeout / 1000 + 's for ' + this.name + ' connection (host: ' + this.host + ',port:' + this.port + ')'); }.bind(this)); /** * Emitted when the socket has been closed. Passes true if it closed due to an error * @event Connection:close * @type {bool} */ socket.on('close', function (had_error) { this.emit('close', had_error); closed = true; if (had_error) { Logger.error('Connection to ' + this.name + ' closed due to an error: Not reconnecting'); } else { Logger.warn('Connection to ' + this.name + ' closed: Not reconnecting'); } }.bind(this)); /** * Emitted when the socket has received a packet of data * @event Connection:data * @type {Buffer} */ socket.on('data', function (data) { this.emit('data', data); }.bind(this)); }; util.inherits(Connection, EventEmitter); module.exports = Connection; × Search results Close "},"models_PacketTypes.js.html":{"id":"models_PacketTypes.js.html","title":"Source: models/PacketTypes.js","body":" WARG Groundstation Modules connections/DataRelaycore/Menucore/MenuBuildercore/WindowManagercore/WindowShortcutsmanagers/NetworkManagermodels/Connectionmodels/PacketTypesmodels/TelemetryDatautil/PacketParserutil/PersistentSettingsutil/Templateutil/Validatorviews/AppSettingsViewviews/ConsoleViewviews/NetworkSettingsViewviews/ParentSettingsView Classes models/Connection~Connectionutil/PersistentSettings~PersistentSettings Events models/Connection~Connection:closemodels/Connection~Connection:connectmodels/Connection~Connection:datamodels/Connection~Connection:socket_errormodels/Connection~Connection:timeoutmodels/Connection~Connection:writemodels/TelemetryData~TelemetryData:aircraft_channelsmodels/TelemetryData~TelemetryData:aircraft_gainsmodels/TelemetryData~TelemetryData:aircraft_orientationmodels/TelemetryData~TelemetryData:aircraft_positionmodels/TelemetryData~TelemetryData:aircraft_status Source: models/PacketTypes.js /** * @author Serge Babayan * @module models/PacketTypes * @copyright Waterloo Aerial Robotics Group 2016 * @licence https://raw.githubusercontent.com/UWARG/WARG-Ground-Station/master/LICENSE * @description Contains the different packet types that the TelemetryData module sends out. Also lists the validation * function to use for a certain header received from the picpilot. * @see http://docs.uwarg.com/picpilot/datalink/ */ var PacketTypes = { aircraft_position: { //this is the event name 'lat': 'isValidLatitude', //the key is the header name, the value is a function name in the Validator module. Could be an array if you want to use multiple 'lon': 'isValidLongitude', 'airspeed': 'isValidAirspeed', 'ground_speed': 'isValidSpeed', 'heading': 'isValidHeading', 'heading_setpoint': 'isValidHeading', 'altitude': 'isValidAltitude', 'altitude_setpoint': 'isValidAltitude', 'throttle_setpoint': 'isValidThrottle', 'flap_setpoint': 'isValidFlap' }, aircraft_orientation: { 'pitch': 'isValidPitch', 'roll': 'isValidRoll', 'yaw': 'isValidYaw', 'pitch_rate': 'isValidNumber', 'roll_rate': 'isValidNumber', 'yaw_rate': 'isValidNumber', 'yaw_rate_setpoint': 'isValidNumber', 'roll_rate_setpoint': 'isValidNumber', 'roll_setpoint': 'isValidRoll', 'pitch_rate_setpoint': 'isValidNumber', 'pitch_setpoint': 'isValidPitch' }, aircraft_gains: { 'roll_kp': 'isValidNumber', 'roll_kd': 'isValidNumber', 'roll_ki': 'isValidNumber', 'pitch_kp': 'isValidNumber', 'pitch_kd': 'isValidNumber', 'pitch_ki': 'isValidNumber', 'yaw_kp': 'isValidNumber', 'yaw_kd': 'isValidNumber', 'yaw_ki': 'isValidNumber', 'heading_kp': 'isValidNumber', 'heading_kd': 'isValidNumber', 'heading_ki': 'isValidNumber', 'altitude_kp': 'isValidNumber', 'altitude_kd': 'isValidNumber', 'altitude_ki': 'isValidNumber', 'throttle_kp': 'isValidNumber', 'throttle_kd': 'isValidNumber', 'throttle_ki': 'isValidNumber', 'flap_kp': 'isValidNumber', 'flap_kd': 'isValidNumber', 'flap_ki': 'isValidNumber', 'path_gain': 'isValidNumber', 'orbit_gain': 'isValidNumber' }, aircraft_status: { 'time': 'isValidTime', 'sys_time': 'isValidTime', 'last_command_sent0': ['isPositiveNumber', 'isInteger'], 'last_command_sent1': ['isPositiveNumber', 'isInteger'], 'last_command_sent2': ['isPositiveNumber', 'isInteger'], 'last_command_sent3': ['isPositiveNumber', 'isInteger'], 'battery_level1': 'isValidBattery', 'battery_level2': 'isValidBattery', 'autonomousLevel': ['isPositiveNumber', 'isInteger'], 'startup_error_codes': ['isPositiveNumber', 'isInteger'], 'startupSettings': ['isPositiveNumber', 'isInteger'], 'probe_status': ['isPositiveNumber', 'isInteger'], 'RSSI': 'isValidNumber', 'wireless_connection': ['isPositiveNumber', 'isInteger'], 'autopilot_active': ['isPositiveNumber', 'isInteger'], 'gps_status': ['isPositiveNumber', 'isInteger'], 'camera_status': ['isPositiveNumber', 'isInteger'], 'waypoint_count': ['isPositiveNumber', 'isInteger'], 'waypoint_index': ['isPositiveNumber', 'isInteger'], 'path_following': 'isBooleanInt', 'path_checksum': 'isPositiveNumber' }, aircraft_channels: { 'ch1in': 'isInteger', 'ch2in': 'isInteger', 'ch3in': 'isInteger', 'ch4in': 'isInteger', 'ch5in': 'isInteger', 'ch6in': 'isInteger', 'ch7in': 'isInteger', 'ch8in': 'isInteger', 'ch1out': 'isInteger', 'ch2out': 'isInteger', 'ch3out': 'isInteger', 'ch4out': 'isInteger', 'ch5out': 'isInteger', 'ch6out': 'isInteger', 'ch7out': 'isInteger', 'ch8out': 'isInteger' } }; module.exports = PacketTypes; × Search results Close "},"models_TelemetryData.js.html":{"id":"models_TelemetryData.js.html","title":"Source: models/TelemetryData.js","body":" WARG Groundstation Modules connections/DataRelaycore/Menucore/MenuBuildercore/WindowManagercore/WindowShortcutsmanagers/NetworkManagermodels/Connectionmodels/PacketTypesmodels/TelemetryDatautil/PacketParserutil/PersistentSettingsutil/Templateutil/Validatorviews/AppSettingsViewviews/ConsoleViewviews/NetworkSettingsViewviews/ParentSettingsView Classes models/Connection~Connectionutil/PersistentSettings~PersistentSettings Events models/Connection~Connection:closemodels/Connection~Connection:connectmodels/Connection~Connection:datamodels/Connection~Connection:socket_errormodels/Connection~Connection:timeoutmodels/Connection~Connection:writemodels/TelemetryData~TelemetryData:aircraft_channelsmodels/TelemetryData~TelemetryData:aircraft_gainsmodels/TelemetryData~TelemetryData:aircraft_orientationmodels/TelemetryData~TelemetryData:aircraft_positionmodels/TelemetryData~TelemetryData:aircraft_status Source: models/TelemetryData.js /** * @author Serge Babayan * @module models/TelemetryData * @requires util/PacketParser * @requires util * @requires events * @requires config/advanced-config * @copyright Waterloo Aerial Robotics Group 2016 * @licence https://raw.githubusercontent.com/UWARG/WARG-Ground-Station/master/LICENSE * @description Data model that stores the current and past telemetry states of the aircraft. Inherits off of the node EventEmitter, * so it can emit data events to other modules * @extends EventEmitter * @see http://docs.uwarg.com/picpilot/datalink/ */ var PacketParser = require('../util/PacketParser'); var util = require('util'); var advanced_config = require('../../config/advanced-config'); var EventEmitter = require('events'); var _ = require('underscore'); /** * When a new data packet has been received on the data relay connection * @event TelemetryData:aircraft_position * @property {Object} data - Information on the position of the aircraft */ /** * When a new data packet has been received on the data relay connection * @event TelemetryData:aircraft_orientation * @property {Object} data - Information on the orientation of the aircraft */ /** * When a new data packet has been received on the data relay connection * @event TelemetryData:aircraft_gains * @property {Object} data - Current aircraft gains information */ /** * When a new data packet has been received on the data relay connection * @event TelemetryData:aircraft_status * @property {Object} data - Current aircraft status information */ /** * When a new data packet has been received on the data relay connection * @event TelemetryData:aircraft_channels * @property {Object} data - Information about the channel inputs and outputs of the picpilot */ var TelemetryData = function () { /** * @var {Array} headers * An array of headers in the order that the groundstation will be receiving them, as specified from the data relay * @private * @example * console.log(TelemetryData.getHeaders()) * ['lat', 'lon', 'time', ...] */ var headers = []; /** * @var {Object} current_state * Current flight state. In the format of a hash, where the keys are the packet names, and the value is an array of header=&gt;value data * @private * @see models/PacketTypes * @example * console.log(TelemetryData.getCurrentState()) * { * aircraft_position: { * lat: 45.45455, * lon: 324234, * time: 234324324, * ... * }, * aircraft_orientation: { * ... * } * } */ var current_state = {}; /** * @function setHeaders * @param {Array} new_headers */ this.setHeaders = function (new_headers) { headers = new_headers; }; /** * @function getHeaders * @returns {Array} */ this.getHeaders = function () { return headers; }; /** * Clears the telemetry data headers * @function clearHeaders */ this.clearHeaders = function () { headers = []; }; /** * Converts a springfield version of headers (separated by commas) into an array and sets it as its headers. * Will also perform a trim() on each of the header values. * @function setHeadersFromString * @param {String} headers_string Comma-delimited headers string * @example * TelemetryData.setHeadersFromString('header1,header2, header3, header4'); * console.log(TelemetryData.headers); * //Outputs: ['header1', 'header2', 'header3', 'header4'] */ this.setHeadersFromString = function (headers_string) { headers = []; if (headers_string) { headers = headers_string.split(&quot;,&quot;).map(function (str) { return str.trim(); }); } }; /** * Gets the current state of the telemetry data (data that is the most recent) * @function getCurrentState * @returns {Object} * @see models/PacketTypes */ this.getCurrentState = function () { return current_state; }; /** * Sets the telemetry data current state * @function setCurrentState * @param {Object} new_state The state (make sure its in the correct format) * @see models/PacketTypes */ this.setCurrentState = function (new_state) { current_state = new_state; }; /** * Uses the PacketParser module and the existing headers to set the current state from a comma delimited data string * @function setCurrentStateFromString * @param {String} new_state_string Comma-delimited data string */ this.setCurrentStateFromString = function (new_state_string) { this.setCurrentState(PacketParser.parseData(new_state_string, headers)); }; /** * Emits the telemetry data's current state as a variety of packets * @function emitPackets * @example &lt;caption&gt; Usage example &lt;/caption&gt; * TelemetryData.setCurrentState({ * packet_name: { * packet_data1: 'packet_value1', * packet_data2: 'packet_value2' * } * packet_name2: { * ... * } * }) * //this will emit a 'packet_name' and 'packet_name2' events each with their respective data * TelemetryData.emitPackets(); */ this.emitPackets = function () { if (current_state) { _.each(current_state, function (packet_data, packet_name) { this.emit(packet_name, packet_data); }.bind(this)); } }; EventEmitter.call(this); }; //give TelemetryData the ability to emit and listen to events util.inherits(TelemetryData, EventEmitter); var telemetry_data_instance = new TelemetryData(); telemetry_data_instance.setMaxListeners(advanced_config.get('telemetrydata_max_listeners')); module.exports = telemetry_data_instance; × Search results Close "},"util_PacketParser.js.html":{"id":"util_PacketParser.js.html","title":"Source: util/PacketParser.js","body":" WARG Groundstation Modules connections/DataRelaycore/Menucore/MenuBuildercore/WindowManagercore/WindowShortcutsmanagers/NetworkManagermodels/Connectionmodels/PacketTypesmodels/TelemetryDatautil/PacketParserutil/PersistentSettingsutil/Templateutil/Validatorviews/AppSettingsViewviews/ConsoleViewviews/NetworkSettingsViewviews/ParentSettingsView Classes models/Connection~Connectionutil/PersistentSettings~PersistentSettings Events models/Connection~Connection:closemodels/Connection~Connection:connectmodels/Connection~Connection:datamodels/Connection~Connection:socket_errormodels/Connection~Connection:timeoutmodels/Connection~Connection:writemodels/TelemetryData~TelemetryData:aircraft_channelsmodels/TelemetryData~TelemetryData:aircraft_gainsmodels/TelemetryData~TelemetryData:aircraft_orientationmodels/TelemetryData~TelemetryData:aircraft_positionmodels/TelemetryData~TelemetryData:aircraft_status Source: util/PacketParser.js /** * @author Serge Babayan * @module util/PacketParser * @requires util/Logger * @requires util/Validator * @requires models/PacketTypes * @requires underscore * @copyright Waterloo Aerial Robotics Group 2016 * @licence https://raw.githubusercontent.com/UWARG/WARG-Ground-Station/master/LICENSE * @description Parses data received from the data relay into a usable format for the ground station's event emitters * @see http://docs.uwarg.com/picpilot/datalink/ */ var PacketTypes = require('../models/PacketTypes'); var Logger = require('./Logger'); var Validator = require('./Validator'); var _ = require('underscore'); var PacketParser = { /** * Compares the received headers to that of the headers in the PacketTypes module. * Warns the user if there are extra or missing headers * @function checkForMissingHeaders * @param {Array} headers_array */ checkForMissingHeaders: function (headers_array) { var expected_headers = {}; //create a list of the headers we expect to receive and set their value to 0 _.each(PacketTypes, function (packet_headers) { _.each(packet_headers, function (validator, header_name) { expected_headers[header_name] = 0; }) }); _.each(headers_array, function (header_name) { //if we receive a header that wasn't listed in the PacketTypes model if (expected_headers[header_name] === undefined) { Logger.warn('An unexpected header was received from the data relay. Header: ' + header_name); } else { expected_headers[header_name]++; } }); _.each(expected_headers, function (count, header_name) { if (count === 0) { Logger.warn('Did not receive an expected header! Header: ' + header_name); } else if (count &gt; 1) { Logger.warn('Header: ' + header_name + ' was received more than once! Times: ' + count); } }); }, /** * Converts a string of data into a packet type object, to be emitted by the TelemetryData module. * Uses the PacketTypes module in order to sort the headers into the appropriate packet types as well * as to perform the correct validations on each one * @function parseData * @param data {string} A stringified version of the data (split by commas) * @param headers_array {Array} An array of the headers in the same order as the headers * @returns {Object} A hash indexed by the packet type name, with the values being another hash in a format of header_name =&gt; data_value * @throws Error if the specified validation function doesn't exist * @example &lt;caption&gt; Given &lt;code&gt;'34, 89.654, ...'&lt;/code&gt; as data and &lt;code&gt;['heading', 'lon', ...]&lt;/code&gt; as headers, will return: &lt;/caption&gt; * { * aircraft_position: { * heading: 34, * lon: 89.654 * ... * }, * aircraft_orientation: {...}, * aircraft_gains: {...} * ... * } */ parseData: function (data, headers_array) { if(!data || !headers_array){ return {}; } var data_array = data.split(&quot;,&quot;).map(function(data){ return data.trim().replace('(','').replace(')',''); }); var sorted_data = {}; var current_state = {}; //warn the user if we receive an improper number of data if (data_array.length !== headers_array.length) { Logger.error('Number of data headers doesn\\'t match the number of data! Length of data: ' + data_array.length + ' Length of headers: ' + headers_array.length); } //creates a current_state object, which is a hash with the keys being the header name, and the value being the data for that header for (var i = 0; i &lt; headers_array.length; i++) { current_state[headers_array[i]] = data_array[i]; } _.each(PacketTypes, function (packet_headers, packet_type_name) { var packet_data = {}; _.each(packet_headers, function (validators, header_name) { //if it is null, that means the data relay intentionally didn't send us the data if (current_state[header_name] === '') { packet_data[header_name] = null; } //warn the user if we didn't receive a piece of data (happens if we don't receive enough data) else if (current_state[header_name] === undefined) { Logger.error('Parsing Error. Value for header ' + header_name + ' not received'); packet_data[header_name] = null; } //otherwise if we received a piece of data, perform the necessary validations on it and convert it to a number else { if (validators === null) { packet_data[header_name] = Number(current_state[header_name]); } else if (typeof validators === 'string') { //if its only a single validation function if (typeof Validator[validators] !== 'function') { throw new Error('Validator function ' + validators + ' does not exist!'); } else if (Validator[validators](current_state[header_name])) { packet_data[header_name] = Number(current_state[header_name]); } else { Logger.warn('Validation failed for ' + header_name + '. Value: ' + current_state[header_name]); packet_data[header_name] = null; } } else { //if its in array and there are multiple validation functions var failed = false; for (var i = 0; i &lt; validators.length; i++) { if (typeof Validator[validators[i]] !== 'function') { throw new Error('Validator function ' + validators[i] + ' does not exist!'); } else if (!Validator[validators[i]](current_state[header_name])) { failed = true; } } if (failed) { Logger.warn('Validation failed for ' + header_name + '. Value: ' + current_state[header_name]); packet_data[header_name] = null; } else { packet_data[header_name] = Number(current_state[header_name]); } } } }); sorted_data[packet_type_name] = packet_data; }); return sorted_data; } }; module.exports = PacketParser; × Search results Close "},"util_PersistentSettings.js.html":{"id":"util_PersistentSettings.js.html","title":"Source: util/PersistentSettings.js","body":" WARG Groundstation Modules connections/DataRelaycore/Menucore/MenuBuildercore/WindowManagercore/WindowShortcutsmanagers/NetworkManagermodels/Connectionmodels/PacketTypesmodels/TelemetryDatautil/PacketParserutil/PersistentSettingsutil/Templateutil/Validatorviews/AppSettingsViewviews/ConsoleViewviews/NetworkSettingsViewviews/ParentSettingsView Classes models/Connection~Connectionutil/PersistentSettings~PersistentSettings Events models/Connection~Connection:closemodels/Connection~Connection:connectmodels/Connection~Connection:datamodels/Connection~Connection:socket_errormodels/Connection~Connection:timeoutmodels/Connection~Connection:writemodels/TelemetryData~TelemetryData:aircraft_channelsmodels/TelemetryData~TelemetryData:aircraft_gainsmodels/TelemetryData~TelemetryData:aircraft_orientationmodels/TelemetryData~TelemetryData:aircraft_positionmodels/TelemetryData~TelemetryData:aircraft_status Source: util/PersistentSettings.js /** * @author Serge Babayan * @module util/PersistentSettings * @requires path * @requires node-persist * @copyright Waterloo Aerial Robotics Group 2016 * @licence https://raw.githubusercontent.com/UWARG/WARG-Ground-Station/master/LICENSE * @description This module provides persistent settings support to the app. It uses [node-persist](https://github.com/simonlast/node-persist) * which provides a local storage api for saving settings. It takes in a `config` object found in the `project_root/config folder` * of the app and returns a new wrapper object for setting and accessing persistent settings. */ var PersistentStorage = require('node-persist'); var path = require('path'); //initialize the PersistentStorage module with the specified directory to save its contents to PersistentStorage.initSync({ dir: path.join(__dirname, '../../persistent_storage') }); /** * @class PersistentSettings * @param file_name The file name of the config file (ie. 'advanced-settings'). This is used as the prefix to its keys * @param settings The contents of the config object. These are used to generate the key-value pairs that are saved in settings */ var PersistentSettings = function (file_name, settings) { &quot;use strict&quot;; /** @property file_name {string} The stored file name. Usually not used externally */ this.file_name = file_name; /** @property default_settings {Hash} The original default settings that are stored from the config objects. */ this.default_settings = settings; for (var key in settings) { if (settings.hasOwnProperty(key)) { if (!PersistentStorage.getItemSync(this.file_name + '_' + key)) { //if the key doesn't exist in local storage yet PersistentStorage.setItemSync(this.file_name + '_' + key, settings[key]); //create the key in local storage } } } /** * @param key {string} The key to retrieve the value of * @returns {Object} The value that is stored in the key. * The object type stays intact (so if its defined as an array in the config object, it will return an array) */ this.get = function (key) { return PersistentStorage.getItemSync(this.file_name + '_' + key); }; /** * * @param key {string} The key to set * @param value {Object} The value to set */ this.set = function (key, value) { PersistentStorage.setItemSync(this.file_name + '_' + key, value); }; }; module.exports = PersistentSettings; × Search results Close "},"util_Template.js.html":{"id":"util_Template.js.html","title":"Source: util/Template.js","body":" WARG Groundstation Modules connections/DataRelaycore/Menucore/MenuBuildercore/WindowManagercore/WindowShortcutsmanagers/NetworkManagermodels/Connectionmodels/PacketTypesmodels/TelemetryDatautil/PacketParserutil/PersistentSettingsutil/Templateutil/Validatorviews/AppSettingsViewviews/ConsoleViewviews/NetworkSettingsViewviews/ParentSettingsView Classes models/Connection~Connectionutil/PersistentSettings~PersistentSettings Events models/Connection~Connection:closemodels/Connection~Connection:connectmodels/Connection~Connection:datamodels/Connection~Connection:socket_errormodels/Connection~Connection:timeoutmodels/Connection~Connection:writemodels/TelemetryData~TelemetryData:aircraft_channelsmodels/TelemetryData~TelemetryData:aircraft_gainsmodels/TelemetryData~TelemetryData:aircraft_orientationmodels/TelemetryData~TelemetryData:aircraft_positionmodels/TelemetryData~TelemetryData:aircraft_status Source: util/Template.js /** * @author Serge Babayan * @module util/Template * @requires fs * @requires underscore * @copyright Waterloo Aerial Robotics Group 2016 * @licence https://raw.githubusercontent.com/UWARG/WARG-Ground-Station/master/LICENSE * @description This module uses [underscore's](http://underscorejs.org/#template) template generation with an input from the html files * in the `project_root/views` directory. It outputs a templated file (stringified version of the html) * that you can use as a template to your views. */ var fs = require('fs'); var _ = require('underscore'); var app_root = require('root-path'); /** * @function * @param template_name {string} The name of the html file you'd like to use as the template for your view. * If its in the root of the views folder, just put in the file name. If its under a directory, * include the directory name (eg. `&quot;subdirectory/MyHTMLFILE.html&quot;`) * @returns {Object} A stringified version of the html that the view can use * as its template. * @example * &lt;caption&gt;Usage of the Template class in a view&lt;/caption&gt; * var Template=require('./util/Template'); * return Template('my_html_file_name_in_views.html'); * //Use the output from this ^^ as your views template. */ var Template = function (template_name) { return _.template(fs.readFileSync(app_root('templates/views/' + template_name + '.html'), 'utf8')); }; module.exports = Template; × Search results Close "},"util_Validator.js.html":{"id":"util_Validator.js.html","title":"Source: util/Validator.js","body":" WARG Groundstation Modules connections/DataRelaycore/Menucore/MenuBuildercore/WindowManagercore/WindowShortcutsmanagers/NetworkManagermodels/Connectionmodels/PacketTypesmodels/TelemetryDatautil/PacketParserutil/PersistentSettingsutil/Templateutil/Validatorviews/AppSettingsViewviews/ConsoleViewviews/NetworkSettingsViewviews/ParentSettingsView Classes models/Connection~Connectionutil/PersistentSettings~PersistentSettings Events models/Connection~Connection:closemodels/Connection~Connection:connectmodels/Connection~Connection:datamodels/Connection~Connection:socket_errormodels/Connection~Connection:timeoutmodels/Connection~Connection:writemodels/TelemetryData~TelemetryData:aircraft_channelsmodels/TelemetryData~TelemetryData:aircraft_gainsmodels/TelemetryData~TelemetryData:aircraft_orientationmodels/TelemetryData~TelemetryData:aircraft_positionmodels/TelemetryData~TelemetryData:aircraft_status Source: util/Validator.js /** * @author Serge Babayan * @module util/Validator * @requires underscore * @copyright Waterloo Aerial Robotics Group 2016 * @licence https://raw.githubusercontent.com/UWARG/WARG-Ground-Station/master/LICENSE * @description Useful and commonly used validation functions used throughout the app */ var _ = require('underscore'); var Validator = { /** * Checks if a value is numeric (Note: `'123.32'` and `123.32` are both numeric) * @function isValidNumber * @param number {string | Number} The value to check * @returns {boolean} */ isValidNumber: function (number) { return !isNaN(parseFloat(number)) &amp;&amp; isFinite(number); }, /** * Checks if a value is a float only * @function isFloat * @param number {string | Number} The value to check * @returns {boolean} * @example * Validator.isFloat('23.23') //true * Validator.isFloat(34.44) //true * Validator.isFloat(4) //false * Validator.isFloat('4') //false */ isFloat: function (number) { if (this.isValidNumber(number)) { var n = Number(number); return n === +n &amp;&amp; n !== (n | 0); } else { return false; } }, /** * Checks if a value is an integer only * @function isInteger * @param number {string | Number} The value to check * @returns {boolean} * @example * Validator.isInteger('23.23') //false * Validator.isInteger(34.44) //false * Validator.isInteger(4) //true * Validator.isInteger('4') //true */ isInteger: function (number) { if (this.isValidNumber(number)) { var n = Number(number); return n === +n &amp;&amp; n === (n | 0); } else { return false; } }, /** * Checks if a value is a positive number * @function isPositiveNumber * @param number {string | Number} The value to check * @returns {boolean} */ isPositiveNumber: function (number) { return this.isValidNumber(number) &amp;&amp; Number(number) &gt;= 0; }, /** * Checks if a value is a bollean integer (1 or 0) * @function isBooleanInt * @param number {string | Number} The value to check * @returns {boolean} */ isBooleanInt: function (number) { return this.isInteger(number) &amp;&amp; (number == 1 || number == 0); }, /** * Checks if a value is a string * @function isString * @param value {mixed} The value to check * @returns {boolean} */ isString: function (value) { return typeof value === 'string' || value instanceof String; }, /** * Checks if a value is a string * @function isNonEmptyString * @param value {string} The value to check * @returns {boolean} */ isNonEmptyString: function (value) { return this.isString(value) &amp;&amp; value.trim().length &gt; 0; }, /** * Checks if a value is an object * @function isObject * @param object {Object} The value to check * @returns {boolean} */ isObject: function (object) { return _.isObject(object); } }; module.exports = Validator; × Search results Close "},"views_AppSettingsView.js.html":{"id":"views_AppSettingsView.js.html","title":"Source: views/AppSettingsView.js","body":" WARG Groundstation Modules connections/DataRelaycore/Menucore/MenuBuildercore/WindowManagercore/WindowShortcutsmanagers/NetworkManagermodels/Connectionmodels/PacketTypesmodels/TelemetryDatautil/PacketParserutil/PersistentSettingsutil/Templateutil/Validatorviews/AppSettingsViewviews/ConsoleViewviews/NetworkSettingsViewviews/ParentSettingsView Classes models/Connection~Connectionutil/PersistentSettings~PersistentSettings Events models/Connection~Connection:closemodels/Connection~Connection:connectmodels/Connection~Connection:datamodels/Connection~Connection:socket_errormodels/Connection~Connection:timeoutmodels/Connection~Connection:writemodels/TelemetryData~TelemetryData:aircraft_channelsmodels/TelemetryData~TelemetryData:aircraft_gainsmodels/TelemetryData~TelemetryData:aircraft_orientationmodels/TelemetryData~TelemetryData:aircraft_positionmodels/TelemetryData~TelemetryData:aircraft_status Source: views/AppSettingsView.js /** * @author Serge Babayan * @module views/AppSettingsView * @requires util/Template * @requires views/ParentSettingsView * @requires config/advanced-config * @requires config/application-config * @requires config/map-config * @requires config/picpilot-config * @requires electron * @extends views/ParentSettingsView * @copyright Waterloo Aerial Robotics Group 2016 * @licence https://raw.githubusercontent.com/UWARG/WARG-Ground-Station/master/LICENSE * @description Responsible general app settings */ var Template = require('../util/Template'); var ParentSettingsView = require('./ParentSettingsView'); var remote = require('electron').remote; //the setting files to display var advanced_config = remote.require('./config/advanced-config'); var app_config = remote.require('./config/application-config'); var map_config = remote.require('./config/map-config'); var picpilot_config = remote.require('./config/picpilot-config'); module.exports = function (Marionette, $) { return ParentSettingsView(Marionette, $).extend({ template: Template('AppSettingsView'), onRender: function () { this.ui.app_settings.append('&lt;h2&gt;Advanced Settings&lt;/h2&gt;'); this.addSettings(advanced_config); this.ui.app_settings.append('&lt;h2&gt;Application Settings&lt;/h2&gt;'); this.addSettings(app_config); this.ui.app_settings.append('&lt;h2&gt;Map Settings&lt;/h2&gt;'); this.addSettings(map_config); this.ui.app_settings.append('&lt;h2&gt;Picpilot Settings&lt;/h2&gt;'); this.addSettings(picpilot_config); } }); }; × Search results Close "},"views_ConsoleView.js.html":{"id":"views_ConsoleView.js.html","title":"Source: views/ConsoleView.js","body":" WARG Groundstation Modules connections/DataRelaycore/Menucore/MenuBuildercore/WindowManagercore/WindowShortcutsmanagers/NetworkManagermodels/Connectionmodels/PacketTypesmodels/TelemetryDatautil/PacketParserutil/PersistentSettingsutil/Templateutil/Validatorviews/AppSettingsViewviews/ConsoleViewviews/NetworkSettingsViewviews/ParentSettingsView Classes models/Connection~Connectionutil/PersistentSettings~PersistentSettings Events models/Connection~Connection:closemodels/Connection~Connection:connectmodels/Connection~Connection:datamodels/Connection~Connection:socket_errormodels/Connection~Connection:timeoutmodels/Connection~Connection:writemodels/TelemetryData~TelemetryData:aircraft_channelsmodels/TelemetryData~TelemetryData:aircraft_gainsmodels/TelemetryData~TelemetryData:aircraft_orientationmodels/TelemetryData~TelemetryData:aircraft_positionmodels/TelemetryData~TelemetryData:aircraft_status Source: views/ConsoleView.js /** * @author Serge Babayan * @module views/ConsoleView * @requires models/Commands * @requires util/Logger * @requires util/Template * @requires electron * @requires config/advanced-config * @listens util/Logger~Logger:info * @listens util/Logger~Logger:debug * @listens util/Logger~Logger:data * @listens util/Logger~Logger:error-log * @listens util/Logger~Logger:warn * @copyright Waterloo Aerial Robotics Group 2016 * @licence https://raw.githubusercontent.com/UWARG/WARG-Ground-Station/master/LICENSE * @description Listens to the logger module and displays the messages in a console like view */ var remote = require('electron').remote; var Template = require('../util/Template'); var Logger = remote.require('./app/util/Logger'); var advanced_config = remote.require('./config/advanced-config'); module.exports = function (Marionette) { return Marionette.ItemView.extend({ template: Template('ConsoleView'), ui: { console: &quot;#console&quot;, command_input: &quot;#commands-input&quot;, info_toggle: &quot;#console-info-toggle&quot;, debug_toggle: &quot;#console-debug-toggle&quot;, error_toggle: &quot;#console-error-toggle&quot;, warn_toggle: &quot;#console-warn-toggle&quot;, data_toggle: &quot;#console-data-toggle&quot; }, events: { 'click #scroll-bottom-button': 'enableScrollBottom', 'submit #commands-input-form': 'sendCommand', 'keyup #commands-input': 'cycleCommandHistory', 'change #console-info-toggle': 'toggleInfoMessages', 'change #console-debug-toggle': 'toggleDebugMessages', 'change #console-error-toggle': 'toggleErrorMessages', 'change #console-warn-toggle': 'toggleWarnMessages', 'change #console-data-toggle': 'toggleDataMessages' }, className: 'consoleView', initialize: function () { this.scroll_bottom = true; //whether the console will scroll down upon new message arrival this.command_history = []; this.command_history_index = 0; this.max_console_messages = advanced_config.get('max_console_messages'); this.all_displayed_messages = []; //whats kinds of messages we want displayed in the console this.infoMessages = false; this.debugMessages = false; this.errorMessages = false; this.warnMessages = false; this.dataMessages = false; this.logger_callbacks = {}; //we need to keep a reference to the add message callbacks so that we can properly remove off the logger listener }, onRender: function () { //Turns on the logger listeners this.toggleInfoMessages(); this.toggleDebugMessages(); this.toggleErrorMessages(); this.toggleWarnMessages(); this.toggleDataMessages(); this.detectScrollUp(); }, onBeforeDestroy: function () { //Remove any logger listeners if (this.logger_callbacks['info']) { Logger.removeListener('info', this.logger_callbacks['info']); } if (this.logger_callbacks['debug']) { Logger.removeListener('debug', this.logger_callbacks['debug']); } if (this.logger_callbacks['error-log']) { Logger.removeListener('error-log', this.logger_callbacks['error-log']); } if (this.logger_callbacks['warn']) { Logger.removeListener('warn', this.logger_callbacks['warn']); } if (this.logger_callbacks['data']) { Logger.removeListener('data', this.logger_callbacks['data']); } }, toggleInfoMessages: function () { if (this.infoMessages) { //if we should stop listening to info level messages if (this.logger_callbacks['info']) { Logger.removeListener('info', this.logger_callbacks['info']); //stop listening to info level messages from the Logger } this.infoMessages = false; } else { //if we should start listening to info level messages var callback = this.addInfoMessage.bind(this); this.logger_callbacks['info'] = callback; Logger.addListener('info', callback); //call this.addInfoMessage every time an info level message comes in this.infoMessages = true; this.scroll_bottom = true; } this.ui.info_toggle.prop('checked', this.infoMessages); }, toggleDebugMessages: function () { if (this.debugMessages) { if (this.logger_callbacks['debug']) { Logger.removeListener('debug', this.logger_callbacks['debug']); } this.debugMessages = false; } else { var callback = this.addDebugMessage.bind(this); this.logger_callbacks['debug'] = callback; Logger.addListener('debug', callback); this.debugMessages = true; this.scroll_bottom = true; } this.ui.debug_toggle.prop('checked', this.debugMessages); }, toggleErrorMessages: function () { if (this.errorMessages) { if (this.logger_callbacks['error-log']) { Logger.removeListener('error-log', this.logger_callbacks['error-log']); } this.errorMessages = false; } else { var callback = this.addErrorMessage.bind(this); this.logger_callbacks['error-log'] = callback; Logger.addListener('error-log', callback); this.errorMessages = true; this.scroll_bottom = true; } this.ui.error_toggle.prop('checked', this.errorMessages); }, toggleWarnMessages: function () { if (this.warnMessages) { if (this.logger_callbacks['warn']) { Logger.removeListener('warn', this.logger_callbacks['warn']); } this.warnMessages = false; } else { var callback = this.addWarnMessage.bind(this); this.logger_callbacks['warn'] = callback; Logger.addListener('warn', callback); this.warnMessages = true; this.scroll_bottom = true; } this.ui.warn_toggle.prop('checked', this.warnMessages); }, toggleDataMessages: function () { if (this.dataMessages) { if (this.logger_callbacks['data']) { Logger.removeListener('data', this.logger_callbacks['data']); } this.dataMessages = false; } else { var callback = this.addDataMessage.bind(this); this.logger_callbacks['data'] = callback; Logger.addListener('data', callback); this.dataMessages = true; this.scroll_bottom = true; } this.ui.data_toggle.prop('checked', this.dataMessages); }, addInfoMessage: function (time, text) { this.all_displayed_messages.push(this.ui.console.append('&lt;p class=&quot;message info-message&quot;&gt;&lt;time&gt;' + time + '&lt;/time&gt;' + text + '&lt;/p&gt;').children('*:last-child')); this.scrollToBottom(); this.checkMaxConsoleMessages(); }, addDebugMessage: function (time, text) { this.all_displayed_messages.push(this.ui.console.append('&lt;p class=&quot;message debug-message&quot;&gt;&lt;time&gt;' + time + '&lt;/time&gt;' + text + '&lt;/p&gt;').children('*:last-child')); this.scrollToBottom(); this.checkMaxConsoleMessages(); }, addErrorMessage: function (time, text) { this.all_displayed_messages.push(this.ui.console.append('&lt;p class=&quot;message error-message&quot;&gt;&lt;time&gt;' + time + '&lt;/time&gt;' + text + '&lt;/p&gt;').children('*:last-child')); this.scrollToBottom(); this.checkMaxConsoleMessages(); }, addWarnMessage: function (time, text) { this.all_displayed_messages.push(this.ui.console.append('&lt;p class=&quot;message warn-message&quot;&gt;&lt;time&gt;' + time + '&lt;/time&gt;' + text + '&lt;/p&gt;').children('*:last-child')); this.scrollToBottom(); this.checkMaxConsoleMessages(); }, addDataMessage: function (time, text) { this.all_displayed_messages.push(this.ui.console.append('&lt;p class=&quot;message data-message&quot;&gt;&lt;time&gt;' + time + '&lt;/time&gt;' + text + '&lt;/p&gt;').children('*:last-child')); this.scrollToBottom(); this.checkMaxConsoleMessages(); }, sendCommand: function (e) { }, cycleCommandHistory: function (e) { if (e.keyCode === 38) { //keyup this.ui.command_input.val(this.command_history[this.command_history.length - 1 - this.command_history_index]); this.command_history.length - 1 - this.command_history_index &gt; 0 ? this.command_history_index++ : this.command_history_index; } else if (e.keyCode === 40) { //keydown this.ui.command_input.val(this.command_history[this.command_history.length - 1 - this.command_history_index]); this.command_history_index &gt; 0 ? this.command_history_index-- : this.command_history_index; } }, detectScrollUp: function () { //disables scrollToBottom if it detects an upward scroll var lastScrollTop = 0; var that = this; this.ui.console.scroll(function (event) { var scrolltop = event.target.scrollTop; if (scrolltop &lt; lastScrollTop) { // upscroll code that.scroll_bottom = false; } lastScrollTop = scrolltop; }); }, enableScrollBottom: function (e) { e.preventDefault(); this.scroll_bottom = true; this.scrollToBottom(); }, scrollToBottom: function () { if (this.scroll_bottom) { this.ui.console[0].scrollTop = this.ui.console[0].scrollHeight; } }, checkMaxConsoleMessages: function () { if (this.all_displayed_messages.length &gt; this.max_console_messages) { this.all_displayed_messages[0].remove(); this.all_displayed_messages.shift(); } } }); }; × Search results Close "},"views_NetworkSettingsView.js.html":{"id":"views_NetworkSettingsView.js.html","title":"Source: views/NetworkSettingsView.js","body":" WARG Groundstation Modules connections/DataRelaycore/Menucore/MenuBuildercore/WindowManagercore/WindowShortcutsmanagers/NetworkManagermodels/Connectionmodels/PacketTypesmodels/TelemetryDatautil/PacketParserutil/PersistentSettingsutil/Templateutil/Validatorviews/AppSettingsViewviews/ConsoleViewviews/NetworkSettingsViewviews/ParentSettingsView Classes models/Connection~Connectionutil/PersistentSettings~PersistentSettings Events models/Connection~Connection:closemodels/Connection~Connection:connectmodels/Connection~Connection:datamodels/Connection~Connection:socket_errormodels/Connection~Connection:timeoutmodels/Connection~Connection:writemodels/TelemetryData~TelemetryData:aircraft_channelsmodels/TelemetryData~TelemetryData:aircraft_gainsmodels/TelemetryData~TelemetryData:aircraft_orientationmodels/TelemetryData~TelemetryData:aircraft_positionmodels/TelemetryData~TelemetryData:aircraft_status Source: views/NetworkSettingsView.js /** * @author Serge Babayan * @module views/NetworkSettingsView * @requires util/Template * @requires views/ParentSettingsView * @requires config/network-config * @requires connections/DataRelay * @requires electron * @extends views/ParentSettingsView * @copyright Waterloo Aerial Robotics Group 2016 * @licence https://raw.githubusercontent.com/UWARG/WARG-Ground-Station/master/LICENSE * @description Responsible for displaying configurable settings for the data relay connection */ var remote = require('electron').remote; var Template = require('../util/Template'); var ParentSettingsView = require('./ParentSettingsView'); var network_config = remote.require('./config/network-config'); var DataRelay = remote.require('./app/connections/DataRelay'); module.exports = function (Marionette, $) { return ParentSettingsView(Marionette, $).extend({ template: Template('NetworkSettingsView'), ui: { app_settings: '.app-settings', save_button: '.save-button', discard_button: '.discard-button', error_message: '.error-message-box' }, events: { &quot;click .save-button&quot;: 'saveSettings', &quot;click .discard-button&quot;: 'discardChanges', &quot;click .reset-default-button&quot;: 'resetSettingsToDefault', &quot;change .app-settings input&quot;: 'enableSaveDiscardButton', &quot;click .reconnect-all-button&quot;: 'reconnectAll' }, onRender: function () { this.addSettings(network_config); }, reconnectAll: function () { DataRelay.init(); //restart the data relay connection } }); }; × Search results Close "},"views_ParentSettingsView.js.html":{"id":"views_ParentSettingsView.js.html","title":"Source: views/ParentSettingsView.js","body":" WARG Groundstation Modules connections/DataRelaycore/Menucore/MenuBuildercore/WindowManagercore/WindowShortcutsmanagers/NetworkManagermodels/Connectionmodels/PacketTypesmodels/TelemetryDatautil/PacketParserutil/PersistentSettingsutil/Templateutil/Validatorviews/AppSettingsViewviews/ConsoleViewviews/NetworkSettingsViewviews/ParentSettingsView Classes models/Connection~Connectionutil/PersistentSettings~PersistentSettings Events models/Connection~Connection:closemodels/Connection~Connection:connectmodels/Connection~Connection:datamodels/Connection~Connection:socket_errormodels/Connection~Connection:timeoutmodels/Connection~Connection:writemodels/TelemetryData~TelemetryData:aircraft_channelsmodels/TelemetryData~TelemetryData:aircraft_gainsmodels/TelemetryData~TelemetryData:aircraft_orientationmodels/TelemetryData~TelemetryData:aircraft_positionmodels/TelemetryData~TelemetryData:aircraft_status Source: views/ParentSettingsView.js /** * @author Serge Babayan * @module views/ParentSettingsView * @requires util/Validator * @requires underscore * @requires electron * @copyright Waterloo Aerial Robotics Group 2016 * @licence https://raw.githubusercontent.com/UWARG/WARG-Ground-Station/master/LICENSE * @description Master settings view from which the AppSettingsView and NetworkSettingsView inherit off of */ var _ = require('underscore'); var Template = require('../util/Template'); var Validator = require('../util/Validator'); module.exports = function (Marionette, $) { return Marionette.ItemView.extend({ template: Template('AppSettingsView'), //you should override this className: 'settingsView', //no need to override this //you should add onto this if you have more elements ui: { app_settings: '.app-settings', save_button: '.save-button', discard_button: '.discard-button', error_message: '.error-message-box' }, //you should add onto this if you need more events events: { &quot;click .save-button&quot;: 'saveSettings', &quot;click .discard-button&quot;: 'discardChanges', &quot;click .reset-default-button&quot;: 'resetSettingsToDefault', &quot;change .app-settings input&quot;: 'enableSaveDiscardButton' }, //make sure to call the parent method if you override this initialize: function () { this.displayed_settings = {}; //stores the currently modified settings this.original_settings = {};//reference to the original imported setting files }, //you should override this and call your specific settings onRender: function () { }, //displays the setting file on screens and adds an entry to it in the this.displayed_settings object addSettings: function (settings) { this.displayed_settings[settings.file_name] = {}; this.original_settings[settings.file_name] = settings; //create a reference to the original settings for (var key in settings.default_settings) { if (settings.default_settings.hasOwnProperty(key)) { this.displayed_settings[settings.file_name][key] = null; //the reference to the displayed input box var container = $('&lt;div class=&quot;setting&quot;&gt;&lt;p&gt;' + key + '&lt;/p&gt;&lt;/div&gt;'); //create the input box and container for it var input = $('&lt;input type=&quot;text&quot;&gt;'); var setting_val = settings.get(key); if (_.isObject(setting_val)) { input.val(JSON.stringify(setting_val)); //stringify the value if its an object or array } else { input.val(setting_val); //otherwise if its a string or number just store it } container.append(input); this.ui.app_settings.append(container); this.displayed_settings[settings.file_name][key] = input; } } }, //saves the displayed settings to local storage if they are valid (ie the type of the original setting is the type of the new setting) saveSettings: function () { var saving_error = false; for (var filename in this.displayed_settings) { if (this.displayed_settings.hasOwnProperty(filename)) { //go to the setting file for (var setting_key in this.displayed_settings[filename]) { if (this.displayed_settings[filename].hasOwnProperty(setting_key)) { //go to the setting var original_value = this.original_settings[filename].default_settings[setting_key]; var new_value = this.displayed_settings[filename][setting_key].val(); if (Validator.isObject(original_value)) { //if the original value is an object or array, try to do a json.parse and store it as an object var parsed_object = null; try { parsed_object = JSON.parse(this.displayed_settings[filename][setting_key].val()); } catch (e) { this.showErrorMessage('The value for ' + setting_key + ' is not an object. Did not save the value'); saving_error = true; } if (parsed_object) { this.original_settings[filename].set(setting_key, parsed_object); } } else if (_.isNumber(original_value)) { //if the original value is a number store the new value as a number if (Validator.isValidNumber(new_value)) { var number = Number(new_value); this.original_settings[filename].set(setting_key, number); } else { this.showErrorMessage('The value for ' + setting_key + ' is not a number. Did not save the value'); saving_error = true; } } else { //otherwise just store it as a string this.original_settings[filename].set(setting_key, new_value); } } } } } if (!saving_error) { this.hideErrorMessage(); this.disableSaveDiscardButton(); } }, //discards the current displayed setting changes on the window with the ones in local storage discardChanges: function () { for (var filename in this.displayed_settings) { if (this.displayed_settings.hasOwnProperty(filename)) { //go to the setting file for (var setting_key in this.displayed_settings[filename]) { if (this.displayed_settings[filename].hasOwnProperty(setting_key)) { //go to the setting var original_setting = this.original_settings[filename].get(setting_key); //reset the display of the input box to whatever the setting is currently stored as if (_.isObject(original_setting)) { this.displayed_settings[filename][setting_key].val(JSON.stringify(original_setting)); } else { this.displayed_settings[filename][setting_key].val(original_setting); } } } } } this.disableSaveDiscardButton(); this.hideErrorMessage(); }, //reset the local storage and the displayed setting to the one that is in the original config file resetSettingsToDefault: function () { for (var filename in this.displayed_settings) { if (this.displayed_settings.hasOwnProperty(filename)) { //go to the setting file for (var setting_key in this.displayed_settings[filename]) { if (this.displayed_settings[filename].hasOwnProperty(setting_key)) { //go to the setting var original_value = this.original_settings[filename].default_settings[setting_key]; this.original_settings[filename].set(setting_key, original_value); //set the local storage value to the original //set the display to the original value if (_.isObject(original_value)) { this.displayed_settings[filename][setting_key].val(JSON.stringify(original_value)); } else { this.displayed_settings[filename][setting_key].val(original_value); } } } } } this.disableSaveDiscardButton(); }, showErrorMessage: function (message) { if (message) { this.ui.error_message.text(message); } else { this.ui.error_message.text('An error occured.'); } this.ui.error_message.show(); $('body')[0].scrollTop = 0; }, hideErrorMessage: function () { this.ui.error_message.hide(); }, enableSaveDiscardButton: function () { this.ui.save_button.prop('disabled', false); this.ui.discard_button.prop('disabled', false); }, disableSaveDiscardButton: function () { this.ui.save_button.prop('disabled', true); this.ui.discard_button.prop('disabled', true); } }); }; × Search results Close "},"modules.list.html":{"id":"modules.list.html","title":"Modules","body":" WARG Groundstation Modules connections/DataRelaycore/Menucore/MenuBuildercore/WindowManagercore/WindowShortcutsmanagers/NetworkManagermodels/Connectionmodels/PacketTypesmodels/TelemetryDatautil/PacketParserutil/PersistentSettingsutil/Templateutil/Validatorviews/AppSettingsViewviews/ConsoleViewviews/NetworkSettingsViewviews/ParentSettingsView Classes models/Connection~Connectionutil/PersistentSettings~PersistentSettings Events models/Connection~Connection:closemodels/Connection~Connection:connectmodels/Connection~Connection:datamodels/Connection~Connection:socket_errormodels/Connection~Connection:timeoutmodels/Connection~Connection:writemodels/TelemetryData~TelemetryData:aircraft_channelsmodels/TelemetryData~TelemetryData:aircraft_gainsmodels/TelemetryData~TelemetryData:aircraft_orientationmodels/TelemetryData~TelemetryData:aircraft_positionmodels/TelemetryData~TelemetryData:aircraft_status Modules Classes Connection PersistentSettings Events Connection:close Emitted when the socket has been closed. Passes true if it closed due to an error Type: bool Source: models/Connection.js, line 191 Connection:connect Emitted when the socket has successfully connected Type: null Source: models/Connection.js, line 159 Connection:data Emitted when the socket has received a packet of data Type: Buffer Source: models/Connection.js, line 206 Connection:socket_error Emitted when an error has occurred on the socket. Does not throw an error if there are no listeners Type: Object Source: models/Connection.js, line 173 Connection:timeout Emitted when the socket has timed out (receiving no data but still connected) Type: null Source: models/Connection.js, line 181 Connection:write Emitted if data was successfully sent through the socket. Passes back the data sent Type: Object Source: models/Connection.js, line 145 TelemetryData:aircraft_channels When a new data packet has been received on the data relay connection Properties: Name Type Description data Object Information about the channel inputs and outputs of the picpilot Source: models/TelemetryData.js, line 46 TelemetryData:aircraft_gains When a new data packet has been received on the data relay connection Properties: Name Type Description data Object Current aircraft gains information Source: models/TelemetryData.js, line 34 TelemetryData:aircraft_orientation When a new data packet has been received on the data relay connection Properties: Name Type Description data Object Information on the orientation of the aircraft Source: models/TelemetryData.js, line 28 TelemetryData:aircraft_position When a new data packet has been received on the data relay connection Properties: Name Type Description data Object Information on the position of the aircraft Source: models/TelemetryData.js, line 22 TelemetryData:aircraft_status When a new data packet has been received on the data relay connection Properties: Name Type Description data Object Current aircraft status information Source: models/TelemetryData.js, line 40 × Search results Close "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" WARG Groundstation Modules connections/DataRelaycore/Menucore/MenuBuildercore/WindowManagercore/WindowShortcutsmanagers/NetworkManagermodels/Connectionmodels/PacketTypesmodels/TelemetryDatautil/PacketParserutil/PersistentSettingsutil/Templateutil/Validatorviews/AppSettingsViewviews/ConsoleViewviews/NetworkSettingsViewviews/ParentSettingsView Classes models/Connection~Connectionutil/PersistentSettings~PersistentSettings Events models/Connection~Connection:closemodels/Connection~Connection:connectmodels/Connection~Connection:datamodels/Connection~Connection:socket_errormodels/Connection~Connection:timeoutmodels/Connection~Connection:writemodels/TelemetryData~TelemetryData:aircraft_channelsmodels/TelemetryData~TelemetryData:aircraft_gainsmodels/TelemetryData~TelemetryData:aircraft_orientationmodels/TelemetryData~TelemetryData:aircraft_positionmodels/TelemetryData~TelemetryData:aircraft_status Classes Classes Connection PersistentSettings Events Connection:close Emitted when the socket has been closed. Passes true if it closed due to an error Type: bool Source: models/Connection.js, line 191 Connection:connect Emitted when the socket has successfully connected Type: null Source: models/Connection.js, line 159 Connection:data Emitted when the socket has received a packet of data Type: Buffer Source: models/Connection.js, line 206 Connection:socket_error Emitted when an error has occurred on the socket. Does not throw an error if there are no listeners Type: Object Source: models/Connection.js, line 173 Connection:timeout Emitted when the socket has timed out (receiving no data but still connected) Type: null Source: models/Connection.js, line 181 Connection:write Emitted if data was successfully sent through the socket. Passes back the data sent Type: Object Source: models/Connection.js, line 145 TelemetryData:aircraft_channels When a new data packet has been received on the data relay connection Properties: Name Type Description data Object Information about the channel inputs and outputs of the picpilot Source: models/TelemetryData.js, line 46 TelemetryData:aircraft_gains When a new data packet has been received on the data relay connection Properties: Name Type Description data Object Current aircraft gains information Source: models/TelemetryData.js, line 34 TelemetryData:aircraft_orientation When a new data packet has been received on the data relay connection Properties: Name Type Description data Object Information on the orientation of the aircraft Source: models/TelemetryData.js, line 28 TelemetryData:aircraft_position When a new data packet has been received on the data relay connection Properties: Name Type Description data Object Information on the position of the aircraft Source: models/TelemetryData.js, line 22 TelemetryData:aircraft_status When a new data packet has been received on the data relay connection Properties: Name Type Description data Object Current aircraft status information Source: models/TelemetryData.js, line 40 × Search results Close "},"index.html":{"id":"index.html","title":"Index","body":" WARG Groundstation Modules connections/DataRelaycore/Menucore/MenuBuildercore/WindowManagercore/WindowShortcutsmanagers/NetworkManagermodels/Connectionmodels/PacketTypesmodels/TelemetryDatautil/PacketParserutil/PersistentSettingsutil/Templateutil/Validatorviews/AppSettingsViewviews/ConsoleViewviews/NetworkSettingsViewviews/ParentSettingsView Classes models/Connection~Connectionutil/PersistentSettings~PersistentSettings Events models/Connection~Connection:closemodels/Connection~Connection:connectmodels/Connection~Connection:datamodels/Connection~Connection:socket_errormodels/Connection~Connection:timeoutmodels/Connection~Connection:writemodels/TelemetryData~TelemetryData:aircraft_channelsmodels/TelemetryData~TelemetryData:aircraft_gainsmodels/TelemetryData~TelemetryData:aircraft_orientationmodels/TelemetryData~TelemetryData:aircraft_positionmodels/TelemetryData~TelemetryData:aircraft_status WARG-Human-Vision 2.0.0 WARG-Human-VisionContinuation of human vision software using Electron × Search results Close "},"module-connections_DataRelay.html":{"id":"module-connections_DataRelay.html","title":"Module: connections/DataRelay","body":" WARG Groundstation Modules connections/DataRelaycore/Menucore/MenuBuildercore/WindowManagercore/WindowShortcutsmanagers/NetworkManagermodels/Connectionmodels/PacketTypesmodels/TelemetryDatautil/PacketParserutil/PersistentSettingsutil/Templateutil/Validatorviews/AppSettingsViewviews/ConsoleViewviews/NetworkSettingsViewviews/ParentSettingsView Classes models/Connection~Connectionutil/PersistentSettings~PersistentSettings Events models/Connection~Connection:closemodels/Connection~Connection:connectmodels/Connection~Connection:datamodels/Connection~Connection:socket_errormodels/Connection~Connection:timeoutmodels/Connection~Connection:writemodels/TelemetryData~TelemetryData:aircraft_channelsmodels/TelemetryData~TelemetryData:aircraft_gainsmodels/TelemetryData~TelemetryData:aircraft_orientationmodels/TelemetryData~TelemetryData:aircraft_positionmodels/TelemetryData~TelemetryData:aircraft_status Module: connections/DataRelay Configures the data relay connection for connecting to it, and parsing its data and sending out events to the TelemetryData module Author: Serge Babayan Copyright: Waterloo Aerial Robotics Group 2016 Source: connections/DataRelay.js, line 1 See: http://docs.uwarg.com/picpilot/datalink/ Requires module:config/network-config module:managers/NetworkManager module:util/Logger module:util/PacketParser module:StatusManager module:models/TelemetryData Methods &lt;inner&gt; init() Initializes or re-initializes the data relay connection and sets up callbacks for parsing any received data Source: connections/DataRelay.js, line 47 × Search results Close "},"module-core_Menu.html":{"id":"module-core_Menu.html","title":"Module: core/Menu","body":" WARG Groundstation Modules connections/DataRelaycore/Menucore/MenuBuildercore/WindowManagercore/WindowShortcutsmanagers/NetworkManagermodels/Connectionmodels/PacketTypesmodels/TelemetryDatautil/PacketParserutil/PersistentSettingsutil/Templateutil/Validatorviews/AppSettingsViewviews/ConsoleViewviews/NetworkSettingsViewviews/ParentSettingsView Classes models/Connection~Connectionutil/PersistentSettings~PersistentSettings Events models/Connection~Connection:closemodels/Connection~Connection:connectmodels/Connection~Connection:datamodels/Connection~Connection:socket_errormodels/Connection~Connection:timeoutmodels/Connection~Connection:writemodels/TelemetryData~TelemetryData:aircraft_channelsmodels/TelemetryData~TelemetryData:aircraft_gainsmodels/TelemetryData~TelemetryData:aircraft_orientationmodels/TelemetryData~TelemetryData:aircraft_positionmodels/TelemetryData~TelemetryData:aircraft_status Module: core/Menu Application menu configuration. Custom menu items are added here. The top level object is the menu item name. The second level is the sub-menu name. Add a callback attribute with a function if you want to call a function after a user clicks on the item. Add a 'openWindow' attribute with the name of your window if you want to open a specific window. If both callback and openWindow are provided, the callback will be executed and then the window will be opened. Note: The View and Help menu items are generated in the MenuBuilder Author: Serge Babayan Copyright: Waterloo Aerial Robotics Group 2016 Source: core/Menu.js, line 1 Example Example of a menu item that calls a function before opening 'project_root/windows/myNewWindow.html' var Menu = { 'Windows': { //this is the menu label 'Open Your New Window': { //this is the submenu label callback: function () { //optional function to be called before opening window }, openWindow: 'myNewWindow', //name of the window to open (optional) height: 800, //height and width of the window. Default is 500 by 500 width: 600, devTools: true, //whether to open chrome devtools with the window (false by default) type: 'separator' //whether this sub menu item is a separator } } }; Requires module:electron module:util/GainsImporter module:util/PathImporter × Search results Close "},"module-core_MenuBuilder.html":{"id":"module-core_MenuBuilder.html","title":"Module: core/MenuBuilder","body":" WARG Groundstation Modules connections/DataRelaycore/Menucore/MenuBuildercore/WindowManagercore/WindowShortcutsmanagers/NetworkManagermodels/Connectionmodels/PacketTypesmodels/TelemetryDatautil/PacketParserutil/PersistentSettingsutil/Templateutil/Validatorviews/AppSettingsViewviews/ConsoleViewviews/NetworkSettingsViewviews/ParentSettingsView Classes models/Connection~Connectionutil/PersistentSettings~PersistentSettings Events models/Connection~Connection:closemodels/Connection~Connection:connectmodels/Connection~Connection:datamodels/Connection~Connection:socket_errormodels/Connection~Connection:timeoutmodels/Connection~Connection:writemodels/TelemetryData~TelemetryData:aircraft_channelsmodels/TelemetryData~TelemetryData:aircraft_gainsmodels/TelemetryData~TelemetryData:aircraft_orientationmodels/TelemetryData~TelemetryData:aircraft_positionmodels/TelemetryData~TelemetryData:aircraft_status Module: core/MenuBuilder Builds an electron based menu template from the core/Menu file and returns an electron menu that can be attached to a BrowserWindow Author: Serge Babayan Copyright: Waterloo Aerial Robotics Group 2016 Source: core/MenuBuilder.js, line 1 Requires module:core/Menu module:core/WindowManager module:electron Methods &lt;inner&gt; build() Source: core/MenuBuilder.js, line 17 Returns: menu Type electron.Menu × Search results Close "},"module-core_WindowManager.html":{"id":"module-core_WindowManager.html","title":"Module: core/WindowManager","body":" WARG Groundstation Modules connections/DataRelaycore/Menucore/MenuBuildercore/WindowManagercore/WindowShortcutsmanagers/NetworkManagermodels/Connectionmodels/PacketTypesmodels/TelemetryDatautil/PacketParserutil/PersistentSettingsutil/Templateutil/Validatorviews/AppSettingsViewviews/ConsoleViewviews/NetworkSettingsViewviews/ParentSettingsView Classes models/Connection~Connectionutil/PersistentSettings~PersistentSettings Events models/Connection~Connection:closemodels/Connection~Connection:connectmodels/Connection~Connection:datamodels/Connection~Connection:socket_errormodels/Connection~Connection:timeoutmodels/Connection~Connection:writemodels/TelemetryData~TelemetryData:aircraft_channelsmodels/TelemetryData~TelemetryData:aircraft_gainsmodels/TelemetryData~TelemetryData:aircraft_orientationmodels/TelemetryData~TelemetryData:aircraft_positionmodels/TelemetryData~TelemetryData:aircraft_status Module: core/WindowManager Manages the creation and destruction of windows for the application Author: Serge Babayan Copyright: Waterloo Aerial Robotics Group 2016 Source: core/WindowManager.js, line 1 Requires module:electron module:util/Logger module:root-path Members &lt;private, inner&gt; open_windows :ObjectHash Stores all the currently open windows Type: ObjectHash Source: core/WindowManager.js, line 17 Methods &lt;inner&gt; getFocusedWindowName() Returns the unique name for the currently focused window Source: core/WindowManager.js, line 75 Returns: name The name of the window, or null if one wasn't found Type string | null &lt;inner&gt; getWindowNameFromId(id) Retrieves the hash key or window name for a window based on its BrowserWindow id Parameters: Name Type Description id int The id of the window Source: core/WindowManager.js, line 58 Returns: name The name of the window, or null if one wasn't found Type string | null &lt;inner&gt; openWindow(window_file_name, options) Opens a window by either creating it or focusing on an existing one Parameters: Name Type Description window_file_name string The window template file name options Object Parameters specific to electron.BrowserWindow Source: core/WindowManager.js, line 23 × Search results Close "},"module-core_WindowShortcuts.html":{"id":"module-core_WindowShortcuts.html","title":"Module: core/WindowShortcuts","body":" WARG Groundstation Modules connections/DataRelaycore/Menucore/MenuBuildercore/WindowManagercore/WindowShortcutsmanagers/NetworkManagermodels/Connectionmodels/PacketTypesmodels/TelemetryDatautil/PacketParserutil/PersistentSettingsutil/Templateutil/Validatorviews/AppSettingsViewviews/ConsoleViewviews/NetworkSettingsViewviews/ParentSettingsView Classes models/Connection~Connectionutil/PersistentSettings~PersistentSettings Events models/Connection~Connection:closemodels/Connection~Connection:connectmodels/Connection~Connection:datamodels/Connection~Connection:socket_errormodels/Connection~Connection:timeoutmodels/Connection~Connection:writemodels/TelemetryData~TelemetryData:aircraft_channelsmodels/TelemetryData~TelemetryData:aircraft_gainsmodels/TelemetryData~TelemetryData:aircraft_orientationmodels/TelemetryData~TelemetryData:aircraft_positionmodels/TelemetryData~TelemetryData:aircraft_status Module: core/WindowShortcuts Creates common shortcuts for a window. Requires Mousetrap.js to be declared within the window. Current shortcuts include the ability to close and refresh windows, as well as open dev tools. Author: Serge Babayan Copyright: Waterloo Aerial Robotics Group 2016 Source: core/WindowShortcuts.js, line 1 Example Usage example var WindowShortcuts = require('../../app/core/WindowShortcuts'); WindowShortcuts.init(Mousetrap); //we pass in mousetrap in here Requires module:util/Logger module:electron Methods &lt;static&gt; init(Mousetrap) function init Parameters: Name Type Description Mousetrap Object Reference to the window's Mousetrap object Source: core/WindowShortcuts.js, line 23 × Search results Close "},"module-managers_NetworkManager.html":{"id":"module-managers_NetworkManager.html","title":"Module: managers/NetworkManager","body":" WARG Groundstation Modules connections/DataRelaycore/Menucore/MenuBuildercore/WindowManagercore/WindowShortcutsmanagers/NetworkManagermodels/Connectionmodels/PacketTypesmodels/TelemetryDatautil/PacketParserutil/PersistentSettingsutil/Templateutil/Validatorviews/AppSettingsViewviews/ConsoleViewviews/NetworkSettingsViewviews/ParentSettingsView Classes models/Connection~Connectionutil/PersistentSettings~PersistentSettings Events models/Connection~Connection:closemodels/Connection~Connection:connectmodels/Connection~Connection:datamodels/Connection~Connection:socket_errormodels/Connection~Connection:timeoutmodels/Connection~Connection:writemodels/TelemetryData~TelemetryData:aircraft_channelsmodels/TelemetryData~TelemetryData:aircraft_gainsmodels/TelemetryData~TelemetryData:aircraft_orientationmodels/TelemetryData~TelemetryData:aircraft_positionmodels/TelemetryData~TelemetryData:aircraft_status Module: managers/NetworkManager Stores and manages all network connections for the app. Stores a connection by its name, and only allows for having a single instance of a certain type of connection. Author: Serge Babayan Copyright: Waterloo Aerial Robotics Group 2016 Source: managers/NetworkManager.js, line 1 See: https://nodejs.org/api/net.html Requires module:models/Connection Methods &lt;inner&gt; addConnection(name, host, port) Adds a connection to the NetworkManager, and attempts to connect it. Note that this does not check if an existing connection of the same name exists. Will just overwrite the connection in that case. Parameters: Name Type Description name String Unique connection name host String Host(ie. 192.168.1.101) port String The port to connect to Source: managers/NetworkManager.js, line 23 Returns: The newly created connection Type Connection Example Say we want to connect data relay to 192.168.1.101:1234 //This will create a new connection for the data relay and attempt to connect to it NetworkManager.addConnection('data_relay', '192.168.1.101', '1234'); &lt;inner&gt; disconnectAllConnections() Disconnects any network connections Source: managers/NetworkManager.js, line 84 &lt;inner&gt; getConnectionByName(name) Returns the stored connection as specified by the its name. Returns null if the connection doesn't exist Parameters: Name Type Description name String The unique name for the connection Source: managers/NetworkManager.js, line 71 Returns: Type Connection &lt;inner&gt; removeAllConnections() Disconnects and removes all connections, including their event listeners from the app. Use with caution. Source: managers/NetworkManager.js, line 59 &lt;inner&gt; removeConnection(name) Disconnects and removes a connection and all its event listeners from Network manager. Does nothing if the connection does not exist Parameters: Name Type Description name String Unique connection name Source: managers/NetworkManager.js, line 46 × Search results Close "},"module-models_Connection.html":{"id":"module-models_Connection.html","title":"Module: models/Connection","body":" WARG Groundstation Modules connections/DataRelaycore/Menucore/MenuBuildercore/WindowManagercore/WindowShortcutsmanagers/NetworkManagermodels/Connectionmodels/PacketTypesmodels/TelemetryDatautil/PacketParserutil/PersistentSettingsutil/Templateutil/Validatorviews/AppSettingsViewviews/ConsoleViewviews/NetworkSettingsViewviews/ParentSettingsView Classes models/Connection~Connectionutil/PersistentSettings~PersistentSettings Events models/Connection~Connection:closemodels/Connection~Connection:connectmodels/Connection~Connection:datamodels/Connection~Connection:socket_errormodels/Connection~Connection:timeoutmodels/Connection~Connection:writemodels/TelemetryData~TelemetryData:aircraft_channelsmodels/TelemetryData~TelemetryData:aircraft_gainsmodels/TelemetryData~TelemetryData:aircraft_orientationmodels/TelemetryData~TelemetryData:aircraft_positionmodels/TelemetryData~TelemetryData:aircraft_status Module: models/Connection Represents a TCP connection. This is used as a wrapper for the connection to the data relay Author: Serge Babayan Copyright: Waterloo Aerial Robotics Group 2016 Source: models/Connection.js, line 1 See: https://nodejs.org/api/net.html Extends EventEmitter Requires module:util/Logger module:net module:util module:events module:config/advanced-config Classes Connection Methods &lt;inner&gt; destroy() Disconnects the connection and removes all event listeners Source: models/Connection.js, line 95 &lt;inner&gt; getTimeout() Gets the timeout for the socket connection in milliseconds Source: models/Connection.js, line 114 Returns: timeout Type int &lt;inner&gt; isClosed() Whether the connection has been closed Source: models/Connection.js, line 105 Returns: Type boolean &lt;inner&gt; setTimeout(new_timeout) Sets the timeout for the socket connection in milliseconds Parameters: Name Type Description new_timeout int Source: models/Connection.js, line 123 Events Connection:close Emitted when the socket has been closed. Passes true if it closed due to an error Type: bool Source: models/Connection.js, line 191 Connection:connect Emitted when the socket has successfully connected Type: null Source: models/Connection.js, line 159 Connection:data Emitted when the socket has received a packet of data Type: Buffer Source: models/Connection.js, line 206 Connection:socket_error Emitted when an error has occurred on the socket. Does not throw an error if there are no listeners Type: Object Source: models/Connection.js, line 173 Connection:timeout Emitted when the socket has timed out (receiving no data but still connected) Type: null Source: models/Connection.js, line 181 Connection:write Emitted if data was successfully sent through the socket. Passes back the data sent Type: Object Source: models/Connection.js, line 145 × Search results Close "},"module-models_Connection-Connection.html":{"id":"module-models_Connection-Connection.html","title":"Class: Connection","body":" WARG Groundstation Modules connections/DataRelaycore/Menucore/MenuBuildercore/WindowManagercore/WindowShortcutsmanagers/NetworkManagermodels/Connectionmodels/PacketTypesmodels/TelemetryDatautil/PacketParserutil/PersistentSettingsutil/Templateutil/Validatorviews/AppSettingsViewviews/ConsoleViewviews/NetworkSettingsViewviews/ParentSettingsView Classes models/Connection~Connectionutil/PersistentSettings~PersistentSettings Events models/Connection~Connection:closemodels/Connection~Connection:connectmodels/Connection~Connection:datamodels/Connection~Connection:socket_errormodels/Connection~Connection:timeoutmodels/Connection~Connection:writemodels/TelemetryData~TelemetryData:aircraft_channelsmodels/TelemetryData~TelemetryData:aircraft_gainsmodels/TelemetryData~TelemetryData:aircraft_orientationmodels/TelemetryData~TelemetryData:aircraft_positionmodels/TelemetryData~TelemetryData:aircraft_status Class: Connection models/Connection~ Connection new Connection(options) Parameters: Name Type Description options Required options to initialize the TCP connection Properties Name Type Description name The unique name of the connection host The hostname (ie. 192.168.1.101) port The port for the connection (ie. 3000) Source: models/Connection.js, line 31 Throws: If one of the parameters weren't provided Type Error Members &lt;private, inner&gt; closed :boolean Whether the connection is closed Type: boolean Source: models/Connection.js, line 53 &lt;private, inner&gt; socket :net.Socket|EventEmitter A reference to the socket. Type: net.Socket | EventEmitter Source: models/Connection.js, line 60 &lt;private, inner&gt; timeout :int Timeout for the socket in milliseconds. Defaults to 5 seconds Type: int Source: models/Connection.js, line 46 Methods connect() Attempts to connect to the TCP socket Source: models/Connection.js, line 71 disconnect() Disconnects from the TCP socket Source: models/Connection.js, line 82 reconnect() Reconnects to the socket (same as doing a disconnect and then a connect) Source: models/Connection.js, line 90 write(data) Attempts to send data through the socket Parameters: Name Type Description data Object The data to send Source: models/Connection.js, line 138 Fires: Connection:write × Search results Close "},"module-models_PacketTypes.html":{"id":"module-models_PacketTypes.html","title":"Module: models/PacketTypes","body":" WARG Groundstation Modules connections/DataRelaycore/Menucore/MenuBuildercore/WindowManagercore/WindowShortcutsmanagers/NetworkManagermodels/Connectionmodels/PacketTypesmodels/TelemetryDatautil/PacketParserutil/PersistentSettingsutil/Templateutil/Validatorviews/AppSettingsViewviews/ConsoleViewviews/NetworkSettingsViewviews/ParentSettingsView Classes models/Connection~Connectionutil/PersistentSettings~PersistentSettings Events models/Connection~Connection:closemodels/Connection~Connection:connectmodels/Connection~Connection:datamodels/Connection~Connection:socket_errormodels/Connection~Connection:timeoutmodels/Connection~Connection:writemodels/TelemetryData~TelemetryData:aircraft_channelsmodels/TelemetryData~TelemetryData:aircraft_gainsmodels/TelemetryData~TelemetryData:aircraft_orientationmodels/TelemetryData~TelemetryData:aircraft_positionmodels/TelemetryData~TelemetryData:aircraft_status Module: models/PacketTypes Contains the different packet types that the TelemetryData module sends out. Also lists the validation function to use for a certain header received from the picpilot. Author: Serge Babayan Copyright: Waterloo Aerial Robotics Group 2016 Source: models/PacketTypes.js, line 1 See: http://docs.uwarg.com/picpilot/datalink/ × Search results Close "},"module-models_TelemetryData.html":{"id":"module-models_TelemetryData.html","title":"Module: models/TelemetryData","body":" WARG Groundstation Modules connections/DataRelaycore/Menucore/MenuBuildercore/WindowManagercore/WindowShortcutsmanagers/NetworkManagermodels/Connectionmodels/PacketTypesmodels/TelemetryDatautil/PacketParserutil/PersistentSettingsutil/Templateutil/Validatorviews/AppSettingsViewviews/ConsoleViewviews/NetworkSettingsViewviews/ParentSettingsView Classes models/Connection~Connectionutil/PersistentSettings~PersistentSettings Events models/Connection~Connection:closemodels/Connection~Connection:connectmodels/Connection~Connection:datamodels/Connection~Connection:socket_errormodels/Connection~Connection:timeoutmodels/Connection~Connection:writemodels/TelemetryData~TelemetryData:aircraft_channelsmodels/TelemetryData~TelemetryData:aircraft_gainsmodels/TelemetryData~TelemetryData:aircraft_orientationmodels/TelemetryData~TelemetryData:aircraft_positionmodels/TelemetryData~TelemetryData:aircraft_status Module: models/TelemetryData Data model that stores the current and past telemetry states of the aircraft. Inherits off of the node EventEmitter, so it can emit data events to other modules Author: Serge Babayan Copyright: Waterloo Aerial Robotics Group 2016 Source: models/TelemetryData.js, line 1 See: http://docs.uwarg.com/picpilot/datalink/ Extends EventEmitter Requires module:util/PacketParser module:util module:events module:config/advanced-config Members &lt;private, inner&gt; current_state :Object Current flight state. In the format of a hash, where the keys are the packet names, and the value is an array of header=&gt;value data Type: Object Source: models/TelemetryData.js, line 63 See: models/PacketTypes Example console.log(TelemetryData.getCurrentState()) { aircraft_position: { lat: 45.45455, lon: 324234, time: 234324324, ... }, aircraft_orientation: { ... } } &lt;private, inner&gt; headers :Array An array of headers in the order that the groundstation will be receiving them, as specified from the data relay Type: Array Source: models/TelemetryData.js, line 53 Example console.log(TelemetryData.getHeaders()) ['lat', 'lon', 'time', ...] Methods &lt;inner&gt; clearHeaders() Clears the telemetry data headers Source: models/TelemetryData.js, line 100 &lt;inner&gt; emitPackets() Emits the telemetry data's current state as a variety of packets Source: models/TelemetryData.js, line 157 Example Usage example TelemetryData.setCurrentState({ packet_name: { packet_data1: 'packet_value1', packet_data2: 'packet_value2' } packet_name2: { ... } }) //this will emit a 'packet_name' and 'packet_name2' events each with their respective data TelemetryData.emitPackets(); &lt;inner&gt; getCurrentState() Gets the current state of the telemetry data (data that is the most recent) Source: models/TelemetryData.js, line 128 See: models/PacketTypes Returns: Type Object &lt;inner&gt; getHeaders() Source: models/TelemetryData.js, line 92 Returns: Type Array &lt;inner&gt; setCurrentState(new_state) Sets the telemetry data current state Parameters: Name Type Description new_state Object The state (make sure its in the correct format) Source: models/TelemetryData.js, line 138 See: models/PacketTypes &lt;inner&gt; setCurrentStateFromString(new_state_string) Uses the PacketParser module and the existing headers to set the current state from a comma delimited data string Parameters: Name Type Description new_state_string String Comma-delimited data string Source: models/TelemetryData.js, line 148 &lt;inner&gt; setHeaders(new_headers) Parameters: Name Type Description new_headers Array Source: models/TelemetryData.js, line 84 &lt;inner&gt; setHeadersFromString(headers_string) Converts a springfield version of headers (separated by commas) into an array and sets it as its headers. Will also perform a trim() on each of the header values. Parameters: Name Type Description headers_string String Comma-delimited headers string Source: models/TelemetryData.js, line 108 Example TelemetryData.setHeadersFromString('header1,header2, header3, header4'); console.log(TelemetryData.headers); //Outputs: ['header1', 'header2', 'header3', 'header4'] Events TelemetryData:aircraft_channels When a new data packet has been received on the data relay connection Properties: Name Type Description data Object Information about the channel inputs and outputs of the picpilot Source: models/TelemetryData.js, line 46 TelemetryData:aircraft_gains When a new data packet has been received on the data relay connection Properties: Name Type Description data Object Current aircraft gains information Source: models/TelemetryData.js, line 34 TelemetryData:aircraft_orientation When a new data packet has been received on the data relay connection Properties: Name Type Description data Object Information on the orientation of the aircraft Source: models/TelemetryData.js, line 28 TelemetryData:aircraft_position When a new data packet has been received on the data relay connection Properties: Name Type Description data Object Information on the position of the aircraft Source: models/TelemetryData.js, line 22 TelemetryData:aircraft_status When a new data packet has been received on the data relay connection Properties: Name Type Description data Object Current aircraft status information Source: models/TelemetryData.js, line 40 × Search results Close "},"module-util_PacketParser.html":{"id":"module-util_PacketParser.html","title":"Module: util/PacketParser","body":" WARG Groundstation Modules connections/DataRelaycore/Menucore/MenuBuildercore/WindowManagercore/WindowShortcutsmanagers/NetworkManagermodels/Connectionmodels/PacketTypesmodels/TelemetryDatautil/PacketParserutil/PersistentSettingsutil/Templateutil/Validatorviews/AppSettingsViewviews/ConsoleViewviews/NetworkSettingsViewviews/ParentSettingsView Classes models/Connection~Connectionutil/PersistentSettings~PersistentSettings Events models/Connection~Connection:closemodels/Connection~Connection:connectmodels/Connection~Connection:datamodels/Connection~Connection:socket_errormodels/Connection~Connection:timeoutmodels/Connection~Connection:writemodels/TelemetryData~TelemetryData:aircraft_channelsmodels/TelemetryData~TelemetryData:aircraft_gainsmodels/TelemetryData~TelemetryData:aircraft_orientationmodels/TelemetryData~TelemetryData:aircraft_positionmodels/TelemetryData~TelemetryData:aircraft_status Module: util/PacketParser Parses data received from the data relay into a usable format for the ground station's event emitters Author: Serge Babayan Copyright: Waterloo Aerial Robotics Group 2016 Source: util/PacketParser.js, line 1 See: http://docs.uwarg.com/picpilot/datalink/ Requires module:util/Logger module:util/Validator module:models/PacketTypes module:underscore Methods &lt;inner&gt; checkForMissingHeaders(headers_array) Compares the received headers to that of the headers in the PacketTypes module. Warns the user if there are extra or missing headers Parameters: Name Type Description headers_array Array Source: util/PacketParser.js, line 20 &lt;inner&gt; parseData(data, headers_array) Converts a string of data into a packet type object, to be emitted by the TelemetryData module. Uses the PacketTypes module in order to sort the headers into the appropriate packet types as well as to perform the correct validations on each one Parameters: Name Type Description data string A stringified version of the data (split by commas) headers_array Array An array of the headers in the same order as the headers Source: util/PacketParser.js, line 56 Throws: Error if the specified validation function doesn't exist Returns: A hash indexed by the packet type name, with the values being another hash in a format of header_name =&gt; data_value Type Object Example Given '34, 89.654, ...' as data and ['heading', 'lon', ...] as headers, will return: { aircraft_position: { heading: 34, lon: 89.654 ... }, aircraft_orientation: {...}, aircraft_gains: {...} ... } × Search results Close "},"module-util_PersistentSettings.html":{"id":"module-util_PersistentSettings.html","title":"Module: util/PersistentSettings","body":" WARG Groundstation Modules connections/DataRelaycore/Menucore/MenuBuildercore/WindowManagercore/WindowShortcutsmanagers/NetworkManagermodels/Connectionmodels/PacketTypesmodels/TelemetryDatautil/PacketParserutil/PersistentSettingsutil/Templateutil/Validatorviews/AppSettingsViewviews/ConsoleViewviews/NetworkSettingsViewviews/ParentSettingsView Classes models/Connection~Connectionutil/PersistentSettings~PersistentSettings Events models/Connection~Connection:closemodels/Connection~Connection:connectmodels/Connection~Connection:datamodels/Connection~Connection:socket_errormodels/Connection~Connection:timeoutmodels/Connection~Connection:writemodels/TelemetryData~TelemetryData:aircraft_channelsmodels/TelemetryData~TelemetryData:aircraft_gainsmodels/TelemetryData~TelemetryData:aircraft_orientationmodels/TelemetryData~TelemetryData:aircraft_positionmodels/TelemetryData~TelemetryData:aircraft_status Module: util/PersistentSettings This module provides persistent settings support to the app. It uses node-persist which provides a local storage api for saving settings. It takes in a config object found in the project_root/config folder of the app and returns a new wrapper object for setting and accessing persistent settings. Author: Serge Babayan Copyright: Waterloo Aerial Robotics Group 2016 Source: util/PersistentSettings.js, line 1 Requires module:path module:node-persist Classes PersistentSettings × Search results Close "},"module-util_PersistentSettings-PersistentSettings.html":{"id":"module-util_PersistentSettings-PersistentSettings.html","title":"Class: PersistentSettings","body":" WARG Groundstation Modules connections/DataRelaycore/Menucore/MenuBuildercore/WindowManagercore/WindowShortcutsmanagers/NetworkManagermodels/Connectionmodels/PacketTypesmodels/TelemetryDatautil/PacketParserutil/PersistentSettingsutil/Templateutil/Validatorviews/AppSettingsViewviews/ConsoleViewviews/NetworkSettingsViewviews/ParentSettingsView Classes models/Connection~Connectionutil/PersistentSettings~PersistentSettings Events models/Connection~Connection:closemodels/Connection~Connection:connectmodels/Connection~Connection:datamodels/Connection~Connection:socket_errormodels/Connection~Connection:timeoutmodels/Connection~Connection:writemodels/TelemetryData~TelemetryData:aircraft_channelsmodels/TelemetryData~TelemetryData:aircraft_gainsmodels/TelemetryData~TelemetryData:aircraft_orientationmodels/TelemetryData~TelemetryData:aircraft_positionmodels/TelemetryData~TelemetryData:aircraft_status Class: PersistentSettings util/PersistentSettings~ PersistentSettings new PersistentSettings(file_name, settings) Parameters: Name Type Description file_name The file name of the config file (ie. 'advanced-settings'). This is used as the prefix to its keys settings The contents of the config object. These are used to generate the key-value pairs that are saved in settings Source: util/PersistentSettings.js, line 21 Members default_settings Properties: Name Type Description default_settings Hash The original default settings that are stored from the config objects. Source: util/PersistentSettings.js, line 33 file_name Properties: Name Type Description file_name string The stored file name. Usually not used externally Source: util/PersistentSettings.js, line 30 Methods get(key) Parameters: Name Type Description key string The key to retrieve the value of Source: util/PersistentSettings.js, line 48 Returns: The value that is stored in the key. The object type stays intact (so if its defined as an array in the config object, it will return an array) Type Object set(key, value) Parameters: Name Type Description key string The key to set value Object The value to set Source: util/PersistentSettings.js, line 57 × Search results Close "},"module-util_Template.html":{"id":"module-util_Template.html","title":"Module: util/Template","body":" WARG Groundstation Modules connections/DataRelaycore/Menucore/MenuBuildercore/WindowManagercore/WindowShortcutsmanagers/NetworkManagermodels/Connectionmodels/PacketTypesmodels/TelemetryDatautil/PacketParserutil/PersistentSettingsutil/Templateutil/Validatorviews/AppSettingsViewviews/ConsoleViewviews/NetworkSettingsViewviews/ParentSettingsView Classes models/Connection~Connectionutil/PersistentSettings~PersistentSettings Events models/Connection~Connection:closemodels/Connection~Connection:connectmodels/Connection~Connection:datamodels/Connection~Connection:socket_errormodels/Connection~Connection:timeoutmodels/Connection~Connection:writemodels/TelemetryData~TelemetryData:aircraft_channelsmodels/TelemetryData~TelemetryData:aircraft_gainsmodels/TelemetryData~TelemetryData:aircraft_orientationmodels/TelemetryData~TelemetryData:aircraft_positionmodels/TelemetryData~TelemetryData:aircraft_status Module: util/Template This module uses underscore's template generation with an input from the html files in the project_root/views directory. It outputs a templated file (stringified version of the html) that you can use as a template to your views. Author: Serge Babayan Copyright: Waterloo Aerial Robotics Group 2016 Source: util/Template.js, line 1 Requires module:fs module:underscore Methods &lt;inner&gt; Template(template_name) Parameters: Name Type Description template_name string The name of the html file you'd like to use as the template for your view. If its in the root of the views folder, just put in the file name. If its under a directory, include the directory name (eg. &quot;subdirectory/MyHTMLFILE.html&quot;) Source: util/Template.js, line 30 Returns: A stringified version of the html that the view can use as its template. Type Object Example Usage of the Template class in a view var Template=require('./util/Template'); return Template('my_html_file_name_in_views.html'); //Use the output from this ^^ as your views template. × Search results Close "},"module-util_Validator.html":{"id":"module-util_Validator.html","title":"Module: util/Validator","body":" WARG Groundstation Modules connections/DataRelaycore/Menucore/MenuBuildercore/WindowManagercore/WindowShortcutsmanagers/NetworkManagermodels/Connectionmodels/PacketTypesmodels/TelemetryDatautil/PacketParserutil/PersistentSettingsutil/Templateutil/Validatorviews/AppSettingsViewviews/ConsoleViewviews/NetworkSettingsViewviews/ParentSettingsView Classes models/Connection~Connectionutil/PersistentSettings~PersistentSettings Events models/Connection~Connection:closemodels/Connection~Connection:connectmodels/Connection~Connection:datamodels/Connection~Connection:socket_errormodels/Connection~Connection:timeoutmodels/Connection~Connection:writemodels/TelemetryData~TelemetryData:aircraft_channelsmodels/TelemetryData~TelemetryData:aircraft_gainsmodels/TelemetryData~TelemetryData:aircraft_orientationmodels/TelemetryData~TelemetryData:aircraft_positionmodels/TelemetryData~TelemetryData:aircraft_status Module: util/Validator Useful and commonly used validation functions used throughout the app Author: Serge Babayan Copyright: Waterloo Aerial Robotics Group 2016 Source: util/Validator.js, line 1 Requires module:underscore Methods &lt;inner&gt; isBooleanInt(number) Checks if a value is a bollean integer (1 or 0) Parameters: Name Type Description number string | Number The value to check Source: util/Validator.js, line 75 Returns: Type boolean &lt;inner&gt; isFloat(number) Checks if a value is a float only Parameters: Name Type Description number string | Number The value to check Source: util/Validator.js, line 23 Returns: Type boolean Example Validator.isFloat('23.23') //true Validator.isFloat(34.44) //true Validator.isFloat(4) //false Validator.isFloat('4') //false &lt;inner&gt; isInteger(number) Checks if a value is an integer only Parameters: Name Type Description number string | Number The value to check Source: util/Validator.js, line 44 Returns: Type boolean Example Validator.isInteger('23.23') //false Validator.isInteger(34.44) //false Validator.isInteger(4) //true Validator.isInteger('4') //true &lt;inner&gt; isNonEmptyString(value) Checks if a value is a string Parameters: Name Type Description value string The value to check Source: util/Validator.js, line 95 Returns: Type boolean &lt;inner&gt; isObject(object) Checks if a value is an object Parameters: Name Type Description object Object The value to check Source: util/Validator.js, line 105 Returns: Type boolean &lt;inner&gt; isPositiveNumber(number) Checks if a value is a positive number Parameters: Name Type Description number string | Number The value to check Source: util/Validator.js, line 65 Returns: Type boolean &lt;inner&gt; isString(value) Checks if a value is a string Parameters: Name Type Description value mixed The value to check Source: util/Validator.js, line 85 Returns: Type boolean &lt;inner&gt; isValidNumber(number) Checks if a value is numeric (Note: '123.32' and 123.32 are both numeric) Parameters: Name Type Description number string | Number The value to check Source: util/Validator.js, line 13 Returns: Type boolean × Search results Close "},"module-views_AppSettingsView.html":{"id":"module-views_AppSettingsView.html","title":"Module: views/AppSettingsView","body":" WARG Groundstation Modules connections/DataRelaycore/Menucore/MenuBuildercore/WindowManagercore/WindowShortcutsmanagers/NetworkManagermodels/Connectionmodels/PacketTypesmodels/TelemetryDatautil/PacketParserutil/PersistentSettingsutil/Templateutil/Validatorviews/AppSettingsViewviews/ConsoleViewviews/NetworkSettingsViewviews/ParentSettingsView Classes models/Connection~Connectionutil/PersistentSettings~PersistentSettings Events models/Connection~Connection:closemodels/Connection~Connection:connectmodels/Connection~Connection:datamodels/Connection~Connection:socket_errormodels/Connection~Connection:timeoutmodels/Connection~Connection:writemodels/TelemetryData~TelemetryData:aircraft_channelsmodels/TelemetryData~TelemetryData:aircraft_gainsmodels/TelemetryData~TelemetryData:aircraft_orientationmodels/TelemetryData~TelemetryData:aircraft_positionmodels/TelemetryData~TelemetryData:aircraft_status Module: views/AppSettingsView Responsible general app settings Author: Serge Babayan Copyright: Waterloo Aerial Robotics Group 2016 Source: views/AppSettingsView.js, line 1 Extends views/ParentSettingsView Requires module:util/Template module:views/ParentSettingsView module:config/advanced-config module:config/application-config module:config/map-config module:config/picpilot-config module:electron × Search results Close "},"module-views_ConsoleView.html":{"id":"module-views_ConsoleView.html","title":"Module: views/ConsoleView","body":" WARG Groundstation Modules connections/DataRelaycore/Menucore/MenuBuildercore/WindowManagercore/WindowShortcutsmanagers/NetworkManagermodels/Connectionmodels/PacketTypesmodels/TelemetryDatautil/PacketParserutil/PersistentSettingsutil/Templateutil/Validatorviews/AppSettingsViewviews/ConsoleViewviews/NetworkSettingsViewviews/ParentSettingsView Classes models/Connection~Connectionutil/PersistentSettings~PersistentSettings Events models/Connection~Connection:closemodels/Connection~Connection:connectmodels/Connection~Connection:datamodels/Connection~Connection:socket_errormodels/Connection~Connection:timeoutmodels/Connection~Connection:writemodels/TelemetryData~TelemetryData:aircraft_channelsmodels/TelemetryData~TelemetryData:aircraft_gainsmodels/TelemetryData~TelemetryData:aircraft_orientationmodels/TelemetryData~TelemetryData:aircraft_positionmodels/TelemetryData~TelemetryData:aircraft_status Module: views/ConsoleView Listens to the logger module and displays the messages in a console like view Author: Serge Babayan Copyright: Waterloo Aerial Robotics Group 2016 Source: views/ConsoleView.js, line 1 Requires module:models/Commands module:util/Logger module:util/Template module:electron module:config/advanced-config × Search results Close "},"module-views_NetworkSettingsView.html":{"id":"module-views_NetworkSettingsView.html","title":"Module: views/NetworkSettingsView","body":" WARG Groundstation Modules connections/DataRelaycore/Menucore/MenuBuildercore/WindowManagercore/WindowShortcutsmanagers/NetworkManagermodels/Connectionmodels/PacketTypesmodels/TelemetryDatautil/PacketParserutil/PersistentSettingsutil/Templateutil/Validatorviews/AppSettingsViewviews/ConsoleViewviews/NetworkSettingsViewviews/ParentSettingsView Classes models/Connection~Connectionutil/PersistentSettings~PersistentSettings Events models/Connection~Connection:closemodels/Connection~Connection:connectmodels/Connection~Connection:datamodels/Connection~Connection:socket_errormodels/Connection~Connection:timeoutmodels/Connection~Connection:writemodels/TelemetryData~TelemetryData:aircraft_channelsmodels/TelemetryData~TelemetryData:aircraft_gainsmodels/TelemetryData~TelemetryData:aircraft_orientationmodels/TelemetryData~TelemetryData:aircraft_positionmodels/TelemetryData~TelemetryData:aircraft_status Module: views/NetworkSettingsView Responsible for displaying configurable settings for the data relay connection Author: Serge Babayan Copyright: Waterloo Aerial Robotics Group 2016 Source: views/NetworkSettingsView.js, line 1 Extends views/ParentSettingsView Requires module:util/Template module:views/ParentSettingsView module:config/network-config module:connections/DataRelay module:electron × Search results Close "},"module-views_ParentSettingsView.html":{"id":"module-views_ParentSettingsView.html","title":"Module: views/ParentSettingsView","body":" WARG Groundstation Modules connections/DataRelaycore/Menucore/MenuBuildercore/WindowManagercore/WindowShortcutsmanagers/NetworkManagermodels/Connectionmodels/PacketTypesmodels/TelemetryDatautil/PacketParserutil/PersistentSettingsutil/Templateutil/Validatorviews/AppSettingsViewviews/ConsoleViewviews/NetworkSettingsViewviews/ParentSettingsView Classes models/Connection~Connectionutil/PersistentSettings~PersistentSettings Events models/Connection~Connection:closemodels/Connection~Connection:connectmodels/Connection~Connection:datamodels/Connection~Connection:socket_errormodels/Connection~Connection:timeoutmodels/Connection~Connection:writemodels/TelemetryData~TelemetryData:aircraft_channelsmodels/TelemetryData~TelemetryData:aircraft_gainsmodels/TelemetryData~TelemetryData:aircraft_orientationmodels/TelemetryData~TelemetryData:aircraft_positionmodels/TelemetryData~TelemetryData:aircraft_status Module: views/ParentSettingsView Master settings view from which the AppSettingsView and NetworkSettingsView inherit off of Author: Serge Babayan Copyright: Waterloo Aerial Robotics Group 2016 Source: views/ParentSettingsView.js, line 1 Requires module:util/Validator module:underscore module:electron × Search results Close "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
