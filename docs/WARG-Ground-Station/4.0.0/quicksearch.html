<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"AircraftStatus.js.html":{"id":"AircraftStatus.js.html","title":"Source: AircraftStatus.js","body":" WARG Groundstation Modules AircraftStatusutil/PersistentSettingsutil/Template Classes util/PersistentSettings~PersistentSettings Source: AircraftStatus.js /** * This is a test * @module AircraftStatus */ var TelemetryData=require('./models/TelemetryData'); var StatusManager=require('./StatusManager'); var Bitmask=require('./util/Bitmask'); var Validator=require('./util/Validator'); var Logger=require('./util/Logger'); var picpilot_config=require('../config/picpilot-config'); var Commands=require('./models/Commands'); var AircraftStatus=function(){ this.following_path=false; this.killModeActive=false; this.killModeWarning=false; this.armed=false; this.initializing=false; this.running=false; this.manualMode=false; this.heartBeatTimeout=picpilot_config.get('heart_beat_timeout'); this.xbee={//has not been implemented yet from the picpilots side status:false, timeSinceLost:null }; this.gps={ status: false, timeSinceLost: null }; this.uhf={ status: false, timeSinceLost: null }; this.pastErrorCode=null; this.startup_errors={ POWER_ON_RESET: false, BROWN_OUT_RESET: false, IDLE_MODE_RESET: false, SLEEP_MODE_RESET: false, SOFTWARE_WATCH_DOG_RESET: false, SOFTWARE_RESET: false, EXTERNAL_RESET: false, VOLTAGE_REGULATOR_RESET: false, ILLEGAL_OPCODE_RESET: false, TRAP_RESET: false }; //sending a heartbeat every 5 seconds setInterval(function(){ Commands.sendHeartbeat(); }, this.heartBeatTimeout); TelemetryData.on('data_received',function(data){ this.checkErrorCodes(data.startup_error_codes); this.checkGPS(data.gps_status); this.checkUHFStatus(data.wireless_connection); this.checkManualMode(data.wireless_connection); this.checkPlaneStatus(data.autopilot_active); this.checkPathFollowing(data.path_following); }.bind(this)); this.checkPathFollowing=function(status){ if(typeof status !== 'undefined' || status!==null){ this.following_path=(Number(status)===1); } } this.checkPlaneStatus=function(number){ if(!Validator.isValidNumber(number)){ Logger.warn('Invalid value for autopilot_active received. Value: '+number); } else{ number=Number(number); this.initializing= (number===0); if(number===1){ //only set armed to false if the number is ONLY 1 this.armed= false; } this.armed= (number===2); this.running= (number===3); this.killModeWarning= (number===4); this.killModeActive= (number===5); StatusManager.setStatusCode('AIRCRAFT_INITIALIZE',this.initializing); StatusManager.setStatusCode('AIRCRAFT_UNARMED',!this.armed); StatusManager.setStatusCode('AIRCRAFT_ARMED',this.armed); StatusManager.setStatusCode('AIRCRAFT_RUNNING',this.running); StatusManager.setStatusCode('AIRCRAFT_KILLMODE_WARNING',this.killModeWarning); StatusManager.setStatusCode('AIRCRAFT_KILLMODE',this.killModeActive); } }; this.checkUHFStatus=function(data){ var number=Number(data); if(!Validator.isInteger(number)){ Logger.warn('Invalid value for wireless_connection received. Value: '+data); } else{ var bitmask=new Bitmask(number); this.uhf.status= bitmask.getBit(1); if(this.uhf.status){ //has been turned to true this.uhf.timeSinceLost=null; } else{ //has been turned to false this.uhf.timeSinceLost=Date.now(); } StatusManager.setStatusCode('UHF_LOST',!this.uhf.status); } }; this.checkManualMode=function(data){ var number=Number(data); if(!Validator.isInteger(number)){ Logger.warn('Invalid value for wireless_connection received. Value: '+data); } else{ var bitmask=new Bitmask(number); this.manualMode= !bitmask.getBit(0); StatusManager.setStatusCode('MANUAL_MODE',this.manualMode); } }; this.checkGPS=function(data){ var number=Number(data); if(!Validator.isValidNumber(number)){ Logger.warn('Invalid GPS status received. Status: '+data); } var connection_status=((number &amp; 0xf0) &gt;&gt; 4)&gt;0; // if theres at least 1 fix if (connection_status !== this.gps.status){ //if its a different status this.gps.status=connection_status; StatusManager.setStatusCode('GPS_LOST',!this.gps.status); if(this.gps.status===false){ //if it was set to false, start the timer this.gps.timeSinceLost=Date.now(); } else{ this.gps.timeSinceLost=null; } } }; this.checkErrorCodes=function(startup_error_codes){ var dataNumber=Number(startup_error_codes); if(!Validator.isInteger(dataNumber)){ Logger.warn('Invalid data value for startup_error_codes received. Value : '+startup_error_codes); } else if(this.pastErrorCode!==dataNumber){ //if we got an error code value thats different from last time var error_codes=new Bitmask(dataNumber); this.pastErrorCode=dataNumber; this.startup_errors.POWER_ON_RESET=error_codes.getBit(0); this.startup_errors.BROWN_OUT_RESET=error_codes.getBit(1); this.startup_errors.IDLE_MODE_RESET=error_codes.getBit(2); this.startup_errors.SLEEP_MODE_RESET=error_codes.getBit(3); this.startup_errors.SOFTWARE_WATCH_DOG_RESET=error_codes.getBit(4); this.startup_errors.SOFTWARE_RESET=error_codes.getBit(5); this.startup_errors.EXTERNAL_RESET=error_codes.getBit(6); this.startup_errors.VOLTAGE_REGULATOR_RESET=error_codes.getBit(7); this.startup_errors.ILLEGAL_OPCODE_RESET=error_codes.getBit(8); this.startup_errors.TRAP_RESET=error_codes.getBit(9); StatusManager.setStatusCode('AIRCRAFT_ERROR_POWER_ON_RESET',this.startup_errors.POWER_ON_RESET); StatusManager.setStatusCode('AIRCRAFT_ERROR_BROWN_OUT_RESET',this.startup_errors.BROWN_OUT_RESET); StatusManager.setStatusCode('AIRCRAFT_ERROR_IDLE_MODE_RESET',this.startup_errors.IDLE_MODE_RESET); StatusManager.setStatusCode('AIRCRAFT_ERROR_SLEEP_MODE_RESET',this.startup_errors.SLEEP_MODE_RESET); StatusManager.setStatusCode('AIRCRAFT_ERROR_SOFTWARE_WATCH_DOG_RESET',this.startup_errors.SOFTWARE_WATCH_DOG_RESET); StatusManager.setStatusCode('AIRCRAFT_ERROR_SOFTWARE_RESET',this.startup_errors.SOFTWARE_RESET); StatusManager.setStatusCode('AIRCRAFT_ERROR_EXTERNAL_RESET',this.startup_errors.EXTERNAL_RESET); StatusManager.setStatusCode('AIRCRAFT_ERROR_VOLTAGE_REGULATOR_RESET',this.startup_errors.VOLTAGE_REGULATOR_RESET); StatusManager.setStatusCode('AIRCRAFT_ERROR_ILLEGAL_OPCODE_RESET',this.startup_errors.ILLEGAL_OPCODE_RESET); StatusManager.setStatusCode('AIRCRAFT_ERROR_TRAP_RESET',this.startup_errors.TRAP_RESET); } } }; module.exports=new AircraftStatus(); × Search results Close "},"util_PersistentSettings.js.html":{"id":"util_PersistentSettings.js.html","title":"Source: util/PersistentSettings.js","body":" WARG Groundstation Modules AircraftStatusutil/PersistentSettingsutil/Template Classes util/PersistentSettings~PersistentSettings Source: util/PersistentSettings.js /** * @author Serge Babayan * @module util/PersistentSettings * @requires path * @requires node-persist * @copyright Waterloo Aerial Robotics Group 2016 * @licence ISC * @description This module provides persistent settings support to the app. It uses [node-persist](https://github.com/simonlast/node-persist) * which provides a local storage api for saving settings. It takes in a `config` object found in the `project_root/config folder` * of the app and returns a new wrapper object for setting and accessing persistent settings. */ var PersistentStorage = require('node-persist'); var path=require('path'); //initialize the PersistentStorage module with the specified directory to save its contents to PersistentStorage.initSync({ dir: path.join(__dirname,'../../persistent_storage') }); /** * @class PersistentSettings * @param file_name The file name of the config file (ie. 'advanced-settings'). This is used as the prefix to its keys * @param settings The contents of the config object. These are used to generate the key-value pairs that are saved in settings */ var PersistentSettings=function(file_name, settings){ &quot;use strict&quot;; /** @property file_name {string} The stored file name. Usually not used externally */ this.file_name=file_name; /** @property default_settings {Hash} The original default settings that are stored from the config objects. */ this.default_settings=settings; for(var key in settings){ if(settings.hasOwnProperty(key)){ if(!PersistentStorage.getItemSync(this.file_name+'_'+key)){ //if the key doesn't exist in local storage yet PersistentStorage.setItemSync(this.file_name+'_'+key,settings[key]); //create the key in local storage } } } /** * @param key {string} The key to retrieve the value of * @returns {Object} The value that is stored in the key. * The object type stays intact (so if its defined as an array in the config object, it will return an array) */ this.get=function(key){ return PersistentStorage.getItemSync(this.file_name+'_'+key); }; /** * * @param key {string} The key to set * @param value {Object} The value to set */ this.set=function(key,value){ PersistentStorage.setItemSync(this.file_name+'_'+key,value); }; }; module.exports=PersistentSettings; × Search results Close "},"util_Template.js.html":{"id":"util_Template.js.html","title":"Source: util/Template.js","body":" WARG Groundstation Modules AircraftStatusutil/PersistentSettingsutil/Template Classes util/PersistentSettings~PersistentSettings Source: util/Template.js /** * @author Serge Babayan * @module util/Template * @requires fs * @requires underscore * @copyright Waterloo Aerial Robotics Group 2016 * @licence ISC * @description This module uses [underscore's](http://underscorejs.org/#template) template generation with an input from the html files * in the `project_root/views` directory. It outputs a templated file (stringified version of the html) * that you can use as a template to your views. */ var fs=require('fs'); var _=require('underscore'); /** * @function * @param template_name {string} The name of the html file you'd like to use as the template for your view. * If its in the root of the views folder, just put in the file name. If its under a directory, * include the directory name (eg. `&quot;subdirectory/MyHTMLFILE.html&quot;`) * @returns {Object} A stringified version of the html that the view can use * as its template. * @example * &lt;caption&gt;Usage of the Template class in a view&lt;/caption&gt; * var Template=require('./util/Template'); * return Template('my_html_file_name_in_views.html'); * //Use the output from this ^^ as your views template. */ var Template=function(template_name){ return _.template(fs.readFileSync('./views/'+template_name+'.html','utf8')); }; module.exports=Template; × Search results Close "},"modules.list.html":{"id":"modules.list.html","title":"Modules","body":" WARG Groundstation Modules AircraftStatusutil/PersistentSettingsutil/Template Classes util/PersistentSettings~PersistentSettings Modules Classes PersistentSettings × Search results Close "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" WARG Groundstation Modules AircraftStatusutil/PersistentSettingsutil/Template Classes util/PersistentSettings~PersistentSettings Classes Classes PersistentSettings × Search results Close "},"index.html":{"id":"index.html","title":"Index","body":" WARG Groundstation Modules AircraftStatusutil/PersistentSettingsutil/Template Classes util/PersistentSettings~PersistentSettings WARG-Ground-Station 4.0.0 WARG Ground StationThe ground station that displays data received from the data-relay-station Installation Clone the repo Download Node.js for your OS Run npm install to install the app dependencies (which includes NW.js) Download sat_tiles.zip and extract the sat_tiles folder to the assets folder of the project Run npm start to start the app BuildingYou have the option of building a self-contained cross-platform executable of the groundstation if you so wish. To do this, simply run npm install to install all of the apps dependencies, then run npm run build. This will use nw-builder to build the executable of the app and save it in the build directory. Running the simulationThe Ground Station supports simulations, so the data-relay-station doesn't actually have to be run. Click on the Window&gt;&gt;Simulation Mode menu item to open the simulation window and start up the simulator. LicenceISC Uses NW.js, Marionette, and Leaflet. Map tiles are in OSM format. They can be downloaded and exported using GMapCatcher. Leaflet is the maps library used to display the tiles. × Search results Close "},"module-AircraftStatus.html":{"id":"module-AircraftStatus.html","title":"Module: AircraftStatus","body":" WARG Groundstation Modules AircraftStatusutil/PersistentSettingsutil/Template Classes util/PersistentSettings~PersistentSettings Module: AircraftStatus This is a test Source: AircraftStatus.js, line 1 × Search results Close "},"module-util_PersistentSettings.html":{"id":"module-util_PersistentSettings.html","title":"Module: util/PersistentSettings","body":" WARG Groundstation Modules AircraftStatusutil/PersistentSettingsutil/Template Classes util/PersistentSettings~PersistentSettings Module: util/PersistentSettings This module provides persistent settings support to the app. It uses node-persist which provides a local storage api for saving settings. It takes in a config object found in the project_root/config folder of the app and returns a new wrapper object for setting and accessing persistent settings. Author: Serge Babayan Copyright: Waterloo Aerial Robotics Group 2016 Source: util/PersistentSettings.js, line 1 Requires module:path module:node-persist Classes PersistentSettings × Search results Close "},"module-util_PersistentSettings-PersistentSettings.html":{"id":"module-util_PersistentSettings-PersistentSettings.html","title":"Class: PersistentSettings","body":" WARG Groundstation Modules AircraftStatusutil/PersistentSettingsutil/Template Classes util/PersistentSettings~PersistentSettings Class: PersistentSettings util/PersistentSettings~ PersistentSettings new PersistentSettings(file_name, settings) Parameters: Name Type Description file_name The file name of the config file (ie. 'advanced-settings'). This is used as the prefix to its keys settings The contents of the config object. These are used to generate the key-value pairs that are saved in settings Source: util/PersistentSettings.js, line 21 Members default_settings Properties: Name Type Description default_settings Hash The original default settings that are stored from the config objects. Source: util/PersistentSettings.js, line 33 file_name Properties: Name Type Description file_name string The stored file name. Usually not used externally Source: util/PersistentSettings.js, line 30 Methods get(key) Parameters: Name Type Description key string The key to retrieve the value of Source: util/PersistentSettings.js, line 48 Returns: The value that is stored in the key. The object type stays intact (so if its defined as an array in the config object, it will return an array) Type Object set(key, value) Parameters: Name Type Description key string The key to set value Object The value to set Source: util/PersistentSettings.js, line 57 × Search results Close "},"module-util_Template.html":{"id":"module-util_Template.html","title":"Module: util/Template","body":" WARG Groundstation Modules AircraftStatusutil/PersistentSettingsutil/Template Classes util/PersistentSettings~PersistentSettings Module: util/Template This module uses underscore's template generation with an input from the html files in the project_root/views directory. It outputs a templated file (stringified version of the html) that you can use as a template to your views. Author: Serge Babayan Copyright: Waterloo Aerial Robotics Group 2016 Source: util/Template.js, line 1 Requires module:fs module:underscore Methods &lt;inner&gt; Template(template_name) Parameters: Name Type Description template_name string The name of the html file you'd like to use as the template for your view. If its in the root of the views folder, just put in the file name. If its under a directory, include the directory name (eg. &quot;subdirectory/MyHTMLFILE.html&quot;) Source: util/Template.js, line 29 Returns: A stringified version of the html that the view can use as its template. Type Object Example Usage of the Template class in a view var Template=require('./util/Template'); return Template('my_html_file_name_in_views.html'); //Use the output from this ^^ as your views template. × Search results Close "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
